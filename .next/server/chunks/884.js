"use strict";exports.id=884,exports.ids=[884],exports.modules={9884:(e,t,s)=>{s.d(t,{Z:()=>A});var r=s(326),a=s(7577),i=s(5047),l=s(8307),n=s(6507),c=s(9635),o=s(8393),d=s(4471),m=s(1223);function x({user:e}){let t=(0,i.useRouter)(),{logout:s,switchUser:x}=(0,d.a)(),[h,g]=(0,a.useState)(!1),[u,p]=(0,a.useState)(!1),[f,b]=(0,a.useState)(!1),j=[{id:"1",title:"New tender opportunity",message:"Sentosa Resort Hotel Renovation tender is now available",time:"2 hours ago",unread:!0},{id:"2",title:"Project milestone completed",message:"Marina Bay Condo A&A Works - Phase 1 completed",time:"4 hours ago",unread:!0},{id:"3",title:"Invoice payment received",message:"Payment received for Golden Dragon Restaurant project",time:"1 day ago",unread:!1}],y=j.filter(e=>e.unread).length,v=e=>{x(e),b(!1),g(!1)};return(0,r.jsxs)("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex-1 max-w-md",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx(l.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search projects, clients, tenders...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ampere-500 focus:border-transparent"})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>p(!u),className:"relative p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsx(n.Z,{className:"h-5 w-5"}),y>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:y})]}),u&&(0,r.jsxs)("div",{className:"absolute right-0 mt-2 w-80 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:[r.jsx("div",{className:"p-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"})}),r.jsx("div",{className:"max-h-96 overflow-y-auto",children:j.map(e=>r.jsx("div",{className:`p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer ${e.unread?"bg-blue-50":""}`,children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.title}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.message}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:e.time})]}),e.unread&&r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-1"})]})},e.id))}),r.jsx("div",{className:"p-3 border-t border-gray-200",children:r.jsx("button",{className:"text-sm text-ampere-600 hover:text-ampere-700 font-medium",children:"View all notifications"})})]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>g(!h),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsx("div",{className:"w-8 h-8 bg-ampere-100 rounded-full flex items-center justify-center",children:e.avatar?r.jsx("img",{src:e.avatar,alt:e.name,className:"w-8 h-8 rounded-full object-cover"}):r.jsx(c.Z,{className:"h-4 w-4 text-ampere-600"})}),(0,r.jsxs)("div",{className:"text-left",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.name}),r.jsx("p",{className:"text-xs text-gray-500",children:(0,m.UJ)(e.role)})]}),r.jsx(o.Z,{className:"h-4 w-4 text-gray-400"})]}),h&&r.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:(0,r.jsxs)("div",{className:"py-1",children:[r.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"View Profile"}),r.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Account Settings"}),r.jsx("button",{onClick:()=>b(!f),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Switch User (Demo)"}),r.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Help & Support"}),r.jsx("hr",{className:"my-1"}),r.jsx("button",{onClick:()=>{s(),t.push("/login")},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:"Sign Out"})]})})]})]})]}),f&&(0,r.jsxs)("div",{className:"absolute top-16 right-6 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50 p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Switch User (Demo)"}),r.jsx("div",{className:"space-y-2",children:[{id:"1",name:"John Tan",role:"super_admin",title:"Super Admin"},{id:"2",name:"Sarah Lim",role:"admin",title:"Admin"},{id:"3",name:"David Wong",role:"projects",title:"Projects Manager"},{id:"4",name:"Michelle Chen",role:"finance",title:"Finance Manager"},{id:"5",name:"Robert Kumar",role:"sales",title:"Sales Manager"}].map(t=>(0,r.jsxs)("button",{onClick:()=>v(t.id),className:`w-full text-left p-2 rounded text-sm hover:bg-gray-100 ${e.id===t.id?"bg-ampere-100 text-ampere-700":"text-gray-700"}`,children:[r.jsx("div",{className:"font-medium",children:t.name}),r.jsx("div",{className:"text-xs text-gray-500",children:t.title})]},t.id))})]}),(h||u||f)&&r.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>{g(!1),p(!1),b(!1)}})]})}var h=s(434),g=s(9798),u=s(4061),p=s(7546),f=s(210),b=s(6283),j=s(8932),y=s(1821),v=s(7069),N=s(9819),w=s(8378),S=s(165),k=s(748),C=s(4019);function Z({userRole:e,isCollapsed:t=!1,onToggle:s}){let a=(0,i.usePathname)(),{canAccessFinance:l,canViewClients:n,canManageUsers:c,canManageSettings:o,canViewAuditLogs:x,canViewReports:Z,hasAnyRole:A}=(0,d.a)(),I=[{title:"Dashboard",href:"/dashboard",icon:g.Z,roles:["super_admin","admin","finance","projects","sales"]},{title:"Clients",href:"/clients",icon:u.Z,permissionCheck:()=>n()},{title:"Vendors",href:"/vendors",icon:p.Z,roles:["super_admin","admin","projects"]},{title:"Tenders",href:"/tenders",icon:f.Z,roles:["super_admin","admin","sales"]},{title:"Quotations",href:"/quotations",icon:b.Z,roles:["super_admin","admin","sales","finance"]},{title:"Projects",href:"/projects",icon:j.Z,roles:["super_admin","admin","projects","finance","sales"]},{title:"Finance",href:"/finance",icon:y.Z,permissionCheck:()=>l(),subItems:[{title:"Client Invoices",href:"/finance",icon:b.Z},{title:"Vendor Invoices",href:"/finance/vendor-invoices",icon:b.Z},{title:"Purchase Orders",href:"/finance/purchase-orders",icon:f.Z}]},{title:"Reports",href:"/reports",icon:v.Z,permissionCheck:()=>Z()},{title:"Users",href:"/users",icon:N.Z,permissionCheck:()=>c()},{title:"Settings",href:"/settings",icon:w.Z,permissionCheck:()=>o()},{title:"Audit Logs",href:"/audit-logs",icon:S.Z,permissionCheck:()=>x()}].filter(e=>e.permissionCheck?e.permissionCheck():!!e.roles&&A(e.roles));return(0,r.jsxs)("div",{className:(0,m.cn)("bg-white border-r border-gray-200 h-full flex flex-col transition-all duration-300",t?"w-16":"w-64"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[!t&&r.jsx("div",{className:"flex items-center space-x-2",children:r.jsx("img",{src:"/images/ampere-logo.png",alt:"Ampere Engineering",className:"h-10 w-auto"})}),r.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:t?r.jsx(k.Z,{className:"h-5 w-5 text-gray-600"}):r.jsx(C.Z,{className:"h-5 w-5 text-gray-600"})})]}),r.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:I.map(e=>{let s=e.icon,i=a.startsWith(e.href);return(0,r.jsxs)("div",{children:[(0,r.jsxs)(h.default,{href:e.href,className:(0,m.cn)("sidebar-item group",i&&"active",t&&"justify-center"),title:t?e.title:void 0,children:[r.jsx(s,{className:(0,m.cn)("h-5 w-5",!t&&"mr-3",i?"text-ampere-600":"text-gray-500 group-hover:text-gray-700")}),!t&&r.jsx("span",{className:(0,m.cn)("font-medium",i?"text-ampere-700":"text-gray-700"),children:e.title}),!t&&e.badge&&r.jsx("span",{className:"ml-auto bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full",children:e.badge})]}),!t&&e.subItems&&e.subItems.length>0&&i&&r.jsx("div",{className:"ml-8 mt-2 space-y-1",children:e.subItems.map(e=>{let t=e.icon,s=a===e.href;return(0,r.jsxs)(h.default,{href:e.href,className:(0,m.cn)("sidebar-item group text-sm",s&&"active"),children:[r.jsx(t,{className:(0,m.cn)("h-4 w-4 mr-3",s?"text-ampere-600":"text-gray-500 group-hover:text-gray-700")}),r.jsx("span",{className:(0,m.cn)("font-medium",s?"text-ampere-700":"text-gray-700"),children:e.title})]},e.href)})})]},e.href)})}),!t&&(0,r.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"flex justify-center space-x-2 mb-3",children:[r.jsx("img",{src:"/images/bizsafe-logo.png",alt:"BizSafe Star Accredited",className:"h-6"}),r.jsx("img",{src:"/images/iso45001-logo.png",alt:"ISO 45001 Certified",className:"h-6"})]}),r.jsx("p",{className:"text-xs text-gray-500 text-center",children:"\xa9 2024 Ampere Engineering Pte Ltd"})]})]})}function A({children:e,user:t}){let[s,i]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:"h-screen flex overflow-hidden",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(Z,{userRole:t.role,isCollapsed:s,onToggle:()=>i(!s)})}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsx(x,{user:t}),r.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-50",children:r.jsx("div",{className:"p-6",children:e})})]})]})}},1223:(e,t,s)=>{s.d(t,{UJ:()=>d,Xc:()=>o,cn:()=>i,p6:()=>n,pf:()=>c,xG:()=>l});var r=s(1135),a=s(1009);function i(...e){return(0,a.m6)((0,r.W)(e))}function l(e){return new Intl.NumberFormat("en-SG",{style:"currency",currency:"SGD"}).format(e)}function n(e){return new Intl.DateTimeFormat("en-SG",{year:"numeric",month:"short",day:"numeric"}).format(e)}function c(e,t,s=new Date){let r=t.getTime()-e.getTime();return Math.round(Math.max(0,Math.min(100,(s.getTime()-e.getTime())/r*100)))}function o(e){return({planning:"bg-gray-100 text-gray-800",permit_application:"bg-yellow-100 text-yellow-800",approved:"bg-blue-100 text-blue-800",in_progress:"bg-green-100 text-green-800",completed:"bg-emerald-100 text-emerald-800",cancelled:"bg-red-100 text-red-800",on_hold:"bg-orange-100 text-orange-800"})[e]||"bg-gray-100 text-gray-800"}function d(e){return({super_admin:"Super Admin",admin:"Admin",finance:"Finance",projects:"Projects",sales:"Sales"})[e]||e}}};