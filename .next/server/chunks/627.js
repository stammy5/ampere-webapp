"use strict";exports.id=627,exports.ids=[627],exports.modules={6697:(e,a,s)=>{s.d(a,{Z:()=>r});let r=(0,s(2881).Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},7358:(e,a,s)=>{s.d(a,{Z:()=>r});let r=(0,s(2881).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},1291:(e,a,s)=>{s.d(a,{Z:()=>r});let r=(0,s(2881).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},361:(e,a,s)=>{s.d(a,{Z:()=>r});let r=(0,s(2881).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9669:(e,a,s)=>{s.d(a,{Z:()=>r});let r=(0,s(2881).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},6092:(e,a,s)=>{s.d(a,{Z:()=>r});let r=(0,s(2881).Z)("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},1216:(e,a,s)=>{s.d(a,{Z:()=>r});let r=(0,s(2881).Z)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},2714:(e,a,s)=>{s.d(a,{Z:()=>r});let r=(0,s(2881).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1215:(e,a,s)=>{s.d(a,{Z:()=>r});let r=(0,s(2881).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},7671:(e,a,s)=>{s.d(a,{Z:()=>r});let r=(0,s(2881).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},9508:(e,a,s)=>{s.d(a,{Z:()=>r});let r=(0,s(2881).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},3734:(e,a,s)=>{s.d(a,{Z:()=>r});let r=(0,s(2881).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},6376:(e,a,s)=>{s.d(a,{Z:()=>y});var r=s(326),t=s(7577),l=s(4471),i=s(1223),d=s(9819),n=s(4019),c=s(9635),m=s(165),o=s(1216),x=s(2714),p=s(6697),u=s(1291),h=s(7358),g=s(1215);let b=[{value:"super_admin",label:"Super Admin",description:"Full system access including user management",color:"bg-red-100 text-red-800 border-red-200"},{value:"admin",label:"Admin",description:"Administrative access to most system functions",color:"bg-purple-100 text-purple-800 border-purple-200"},{value:"finance",label:"Finance",description:"Access to financial data, invoicing, and payments",color:"bg-green-100 text-green-800 border-green-200"},{value:"projects",label:"Projects",description:"Access to project management and vendor coordination",color:"bg-blue-100 text-blue-800 border-blue-200"},{value:"sales",label:"Sales",description:"Access to clients, tenders, and quotations",color:"bg-orange-100 text-orange-800 border-orange-200"}];function y({user:e,isOpen:a,onClose:s,onSave:y,mode:v,isLoading:j=!1}){let{user:f}=(0,l.a)(),[N,k]=(0,t.useState)({name:e?.name||"",email:e?.email||"",role:e?.role||"sales",isActive:e?.isActive===void 0||e.isActive,avatar:e?.avatar||""}),[A,w]=(0,t.useState)({}),[Z,S]=(0,t.useState)(!1),C=(e,a)=>{k(s=>({...s,[e]:a})),A[e]&&w(a=>({...a,[e]:""}))},M=()=>{let a={};return N.name.trim()?N.name.trim().length<2&&(a.name="Name must be at least 2 characters"):a.name="Name is required",N.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(N.email)?N.email.endsWith("@ampere.com.sg")||(a.email="Email must be from @ampere.com.sg domain"):a.email="Please enter a valid email address":a.email="Email is required",N.role||(a.role="Role is required"),f?.role!=="super_admin"&&"super_admin"===N.role&&(a.role="Only Super Admins can create Super Admin users"),f?.role==="admin"&&("super_admin"===N.role||"admin"===N.role)&&(a.role="Admins cannot create Admin or Super Admin users"),"edit"===v&&e?.role==="super_admin"&&f?.role!=="super_admin"&&(a.role="Only Super Admins can edit Super Admin users"),"edit"!==v||e?.role!=="super_admin"||N.isActive||(a.isActive="Super Admin users cannot be deactivated"),w(a),0===Object.keys(a).length},_=async e=>{if(e.preventDefault(),!M())return;let a={name:N.name.trim(),email:N.email.trim().toLowerCase(),role:N.role,isActive:N.isActive,avatar:N.avatar.trim()||void 0};await y(a)},L=()=>"add"===v?f?.role==="super_admin"||f?.role==="admin":!!e&&(f?.role==="super_admin"||f?.role==="admin"&&"super_admin"!==e.role&&"admin"!==e.role);return a?r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:r.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:s})}),(0,r.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[r.jsx("div",{className:"bg-white px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-ampere-100 rounded-lg flex items-center justify-center",children:r.jsx(d.Z,{className:"h-5 w-5 text-ampere-600"})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"add"===v?"Add New User":"Edit User"}),r.jsx("p",{className:"text-sm text-gray-600",children:"add"===v?"Create a new user account for Ampere Engineering":"Update user information and permissions"})]})]}),r.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 p-2 rounded-lg hover:bg-gray-100",children:r.jsx(n.Z,{className:"h-5 w-5"})})]})}),(0,r.jsxs)("form",{onSubmit:_,className:"p-6",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"text-md font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(c.Z,{className:"h-4 w-4 mr-2 text-ampere-600"}),"Basic Information"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),r.jsx("input",{type:"text",value:N.name,onChange:e=>C("name",e.target.value),className:(0,i.cn)("w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-ampere-500 focus:border-ampere-500",A.name?"border-red-300":"border-gray-300"),placeholder:"Enter full name",disabled:j}),A.name&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:A.name})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),r.jsx("input",{type:"email",value:N.email,onChange:e=>C("email",e.target.value),className:(0,i.cn)("w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-ampere-500 focus:border-ampere-500",A.email?"border-red-300":"border-gray-300"),placeholder:"user@ampere.com.sg",disabled:j}),A.email&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:A.email})]})]}),(0,r.jsxs)("div",{className:"mt-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Avatar URL (optional)"}),r.jsx("input",{type:"url",value:N.avatar,onChange:e=>C("avatar",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ampere-500 focus:border-ampere-500",placeholder:"https://example.com/avatar.jpg",disabled:j})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h4",{className:"text-md font-semibold text-gray-900 flex items-center",children:[r.jsx(m.Z,{className:"h-4 w-4 mr-2 text-ampere-600"}),"Role & Permissions"]}),(0,r.jsxs)("button",{type:"button",onClick:()=>S(!Z),className:"text-sm text-ampere-600 hover:text-ampere-700 flex items-center",children:[Z?r.jsx(o.Z,{className:"h-4 w-4 mr-1"}):r.jsx(x.Z,{className:"h-4 w-4 mr-1"}),Z?"Hide":"Show"," Role Details"]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"User Role *"}),r.jsx("div",{className:"space-y-2",children:(f?.role==="super_admin"?b:f?.role==="admin"?b.filter(e=>"super_admin"!==e.value&&"admin"!==e.value):b.filter(e=>"sales"===e.value)).map(e=>(0,r.jsxs)("label",{className:"flex items-start space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[r.jsx("input",{type:"radio",name:"role",value:e.value,checked:N.role===e.value,onChange:e=>C("role",e.target.value),className:"mt-1 h-4 w-4 text-ampere-600 focus:ring-ampere-500 border-gray-300",disabled:!L()||j}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsx("span",{className:"font-medium text-gray-900",children:e.label}),r.jsx("span",{className:(0,i.cn)("px-2 py-1 text-xs font-medium rounded-full border",e.color),children:e.value.replace("_"," ")})]}),Z&&r.jsx("p",{className:"text-sm text-gray-600",children:e.description})]})]},e.value))}),A.role&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:A.role})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"text-md font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(p.Z,{className:"h-4 w-4 mr-2 text-ampere-600"}),"Account Status"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:N.isActive,onChange:e=>C("isActive",e.target.checked),className:"h-4 w-4 text-ampere-600 focus:ring-ampere-500 border-gray-300 rounded",disabled:e?.role==="super_admin"||j}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Active Account"})]}),r.jsx("div",{className:(0,i.cn)("px-2 py-1 text-xs font-medium rounded-full",N.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:N.isActive?"Active":"Inactive"})]}),A.isActive&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:A.isActive}),r.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[r.jsx(u.Z,{className:"h-4 w-4 text-blue-600 mt-0.5"}),(0,r.jsxs)("div",{className:"text-sm text-blue-800",children:[r.jsx("p",{className:"font-medium",children:"Account Status Information:"}),(0,r.jsxs)("ul",{className:"mt-1 space-y-1 text-xs",children:[r.jsx("li",{children:"• Active users can log in and access the system"}),r.jsx("li",{children:"• Inactive users are blocked from logging in"}),r.jsx("li",{children:"• Super Admin accounts cannot be deactivated"})]})]})]})})]}),"edit"===v&&e&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,r.jsxs)("h4",{className:"text-md font-semibold text-gray-900 mb-3 flex items-center",children:[r.jsx(h.Z,{className:"h-4 w-4 mr-2 text-gray-600"}),"Account Information"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Created:"}),r.jsx("p",{className:"font-medium",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Last Login:"}),r.jsx("p",{className:"font-medium",children:e.lastLogin?new Date(e.lastLogin).toLocaleDateString():"Never"})]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 mt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:s,disabled:j,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:j,className:"btn-primary flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:j?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),r.jsx("span",{children:"add"===v?"Creating...":"Saving..."})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(g.Z,{className:"h-4 w-4"}),r.jsx("span",{children:"add"===v?"Create User":"Save Changes"})]})})]})]})]})]})}):null}}};