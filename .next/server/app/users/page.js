(()=>{var e={};e.id=240,e.ids=[240],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3002:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>d}),r(2739),r(5967),r(5866);var t=r(3191),a=r(8716),n=r(7922),l=r.n(n),i=r(5231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);r.d(s,c);let d=["",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,2739)),"C:\\Users\\stamm\\AMPERE WEBAPP\\src\\app\\users\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,5967)),"C:\\Users\\stamm\\AMPERE WEBAPP\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\stamm\\AMPERE WEBAPP\\src\\app\\users\\page.tsx"],m="/users/page",x={require:r,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/users/page",pathname:"/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2703:(e,s,r)=>{Promise.resolve().then(r.bind(r,6109))},8091:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});let t=(0,r(2881).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},6109:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>k});var t=r(326),a=r(7577),n=r(434),l=r(4471),i=r(2588),c=r(9884),d=r(6376),o=r(6092),m=r(3734),x=r(1821),u=r(7546),p=r(7671);let h=(0,r(2881).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var g=r(361),j=r(4019),y=r(4061),v=r(9669),b=r(8307),f=r(2714),N=r(9508),w=r(8091),A=r(9819),P=r(1223);let _={super_admin:o.Z,admin:m.Z,finance:x.Z,projects:u.Z,sales:p.Z},C={super_admin:"bg-red-100 text-red-800 border-red-200",admin:"bg-purple-100 text-purple-800 border-purple-200",finance:"bg-green-100 text-green-800 border-green-200",projects:"bg-blue-100 text-blue-800 border-blue-200",sales:"bg-orange-100 text-orange-800 border-orange-200"},Z={super_admin:"Super Admin",admin:"Admin",finance:"Finance",projects:"Projects",sales:"Sales"};function k(){let{user:e}=(0,l.a)(),{users:s,addUser:r,updateUser:m,deleteUser:x,toggleUserStatus:u,getUsersByRole:p,getActiveUsers:k,searchUsers:E}=(0,i.U)(),[U,S]=(0,a.useState)("all"),[M,L]=(0,a.useState)(""),[T,R]=(0,a.useState)(!1),[q,$]=(0,a.useState)(),[D,B]=(0,a.useState)(!1),[G,O]=(0,a.useState)(""),W=(0,a.useMemo)(()=>{let e=s;return"active"===U?e=k():"all"!==U&&(e=p(U)),M&&(e=e.filter(e=>e.name.toLowerCase().includes(M.toLowerCase())||e.email.toLowerCase().includes(M.toLowerCase())||e.role.toLowerCase().includes(M.toLowerCase()))),e.sort((e,s)=>{let r={super_admin:0,admin:1,finance:2,projects:3,sales:4},t=r[e.role]-r[s.role];return 0!==t?t:e.name.localeCompare(s.name)})},[s,U,M,p,k]),F=(0,a.useMemo)(()=>{let e=s.length,r=k().length;return{total:e,active:r,inactive:e-r,byRole:{super_admin:p("super_admin").length,admin:p("admin").length,finance:p("finance").length,projects:p("projects").length,sales:p("sales").length}}},[s,k,p]),H=async e=>{B(!0);try{await new Promise(e=>setTimeout(e,1e3)),r(e),R(!1),O("User created successfully!"),setTimeout(()=>O(""),3e3)}catch(e){console.error("Error creating user:",e)}finally{B(!1)}},I=async e=>{if(q){B(!0);try{await new Promise(e=>setTimeout(e,1e3)),m(q.id,e),$(void 0),O("User updated successfully!"),setTimeout(()=>O(""),3e3)}catch(e){console.error("Error updating user:",e)}finally{B(!1)}}},V=e=>{if("super_admin"===e.role){alert("Super Admin users cannot be deleted.");return}confirm(`Are you sure you want to delete ${e.name}? This action cannot be undone.`)&&x(e.id)&&(O("User deleted successfully!"),setTimeout(()=>O(""),3e3))},J=e=>{if("super_admin"===e.role&&e.isActive){alert("Super Admin users cannot be deactivated.");return}let s=e.isActive?"deactivate":"activate";confirm(`Are you sure you want to ${s} ${e.name}?`)&&u(e.id)&&(O(`User ${s}d successfully!`),setTimeout(()=>O(""),3e3))},X=e?.role==="super_admin"||e?.role==="admin",z=s=>!!X&&"super_admin"!==s.role&&(e?.role!=="admin"||"admin"!==s.role),K=s=>!!X&&(e?.role==="super_admin"||e?.role==="admin"&&"super_admin"!==s.role&&"admin"!==s.role);return e?(0,t.jsxs)(c.Z,{user:e,children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),t.jsx("p",{className:"text-gray-600",children:"Manage user accounts, roles, and permissions for Ampere Engineering"})]}),X&&(0,t.jsxs)("button",{onClick:()=>R(!0),className:"btn-primary flex items-center space-x-2",children:[t.jsx(h,{className:"h-4 w-4"}),t.jsx("span",{children:"Add User"})]})]}),G&&(0,t.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(g.Z,{className:"h-5 w-5 text-green-600"}),t.jsx("span",{className:"text-green-800 font-medium",children:G})]}),t.jsx("button",{onClick:()=>O(""),className:"text-green-600 hover:text-green-800 p-1 rounded-lg hover:bg-green-100",children:t.jsx(j.Z,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsxs)("div",{className:"metric-card",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:F.total})]}),t.jsx(y.Z,{className:"h-8 w-8 text-gray-600"})]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"All registered users"})]}),(0,t.jsxs)("div",{className:"metric-card",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:F.active})]}),t.jsx(g.Z,{className:"h-8 w-8 text-green-600"})]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Currently active accounts"})]}),(0,t.jsxs)("div",{className:"metric-card",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Inactive Users"}),t.jsx("p",{className:"text-2xl font-bold text-red-600",children:F.inactive})]}),t.jsx(v.Z,{className:"h-8 w-8 text-red-600"})]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Deactivated accounts"})]}),(0,t.jsxs)("div",{className:"metric-card",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Administrators"}),t.jsx("p",{className:"text-2xl font-bold text-purple-600",children:F.byRole.super_admin+F.byRole.admin})]}),t.jsx(o.Z,{className:"h-8 w-8 text-purple-600"})]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Super Admin & Admin users"})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[t.jsx("div",{className:"border-b border-gray-200",children:(0,t.jsxs)("nav",{className:"flex space-x-8 px-6",children:[(0,t.jsxs)("button",{onClick:()=>S("all"),className:(0,P.cn)("flex items-center space-x-2 py-4 border-b-2 font-medium text-sm","all"===U?"border-ampere-500 text-ampere-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[t.jsx(y.Z,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:["All Users (",F.total,")"]})]}),(0,t.jsxs)("button",{onClick:()=>S("active"),className:(0,P.cn)("flex items-center space-x-2 py-4 border-b-2 font-medium text-sm","active"===U?"border-ampere-500 text-ampere-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[t.jsx(g.Z,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:["Active (",F.active,")"]})]}),Object.entries(F.byRole).map(([e,s])=>{let r=_[e];return(0,t.jsxs)("button",{onClick:()=>S(e),className:(0,P.cn)("flex items-center space-x-2 py-4 border-b-2 font-medium text-sm",U===e?"border-ampere-500 text-ampere-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[t.jsx(r,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:[Z[e]," (",s,")"]})]},e)})]})}),(0,t.jsxs)("div",{className:"p-6",children:[t.jsx("div",{className:"flex items-center justify-between mb-6",children:t.jsx("div",{className:"flex items-center space-x-4",children:(0,t.jsxs)("div",{className:"relative",children:[t.jsx(b.Z,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search users by name, email, or role...",value:M,onChange:e=>L(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ampere-500 focus:border-ampere-500 w-80"})]})})}),t.jsx("div",{className:"space-y-4",children:W.length>0?W.map(e=>{let s=_[e.role];return t.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-12 h-12 bg-ampere-100 rounded-full flex items-center justify-center",children:e.avatar?t.jsx("img",{src:e.avatar,alt:e.name,className:"w-12 h-12 rounded-full object-cover"}):t.jsx("span",{className:"text-ampere-600 font-semibold text-lg",children:e.name.split(" ").map(e=>e[0]).join("").toUpperCase()})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-1",children:[t.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsxs)("span",{className:(0,P.cn)("px-2 py-1 text-xs font-medium rounded-full border",C[e.role]),children:[t.jsx(s,{className:"h-3 w-3 inline mr-1"}),Z[e.role]]}),t.jsx("span",{className:(0,P.cn)("px-2 py-1 text-xs font-medium rounded-full",e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Active":"Inactive"})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:e.email}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,t.jsxs)("span",{children:["Joined: ",new Date(e.createdAt).toLocaleDateString()]}),t.jsx("span",{children:"•"}),(0,t.jsxs)("span",{children:["Last login: ",e.lastLogin?new Date(e.lastLogin).toLocaleDateString():"Never"]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(n.default,{href:`/users/${e.id}`,className:"text-ampere-600 hover:text-ampere-900 p-2 rounded-lg hover:bg-ampere-50",children:t.jsx(f.Z,{className:"h-4 w-4"})}),K(e)&&t.jsx("button",{onClick:()=>$(e),className:"text-gray-600 hover:text-gray-900 p-2 rounded-lg hover:bg-gray-100",children:t.jsx(N.Z,{className:"h-4 w-4"})}),X&&"super_admin"!==e.role&&t.jsx("button",{onClick:()=>J(e),className:(0,P.cn)("p-2 rounded-lg",e.isActive?"text-red-600 hover:text-red-900 hover:bg-red-50":"text-green-600 hover:text-green-900 hover:bg-green-50"),children:e.isActive?t.jsx(v.Z,{className:"h-4 w-4"}):t.jsx(g.Z,{className:"h-4 w-4"})}),z(e)&&t.jsx("button",{onClick:()=>V(e),className:"text-red-600 hover:text-red-900 p-2 rounded-lg hover:bg-red-50",children:t.jsx(w.Z,{className:"h-4 w-4"})})]})]})},e.id)}):(0,t.jsxs)("div",{className:"text-center py-12",children:[t.jsx(A.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Users Found"}),t.jsx("p",{className:"text-gray-600 mb-4",children:M?"Try adjusting your search criteria.":"all"===U?"No users exist in the system.":`No users found in the ${U} category.`}),X&&!M&&"all"===U&&t.jsx("button",{onClick:()=>R(!0),className:"btn-primary",children:"Add First User"})]})})]})]})]}),t.jsx(d.Z,{isOpen:T,onClose:()=>R(!1),onSave:H,mode:"add",isLoading:D}),t.jsx(d.Z,{user:q,isOpen:!!q,onClose:()=>$(void 0),onSave:I,mode:"edit",isLoading:D})]}):null}},2739:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(8570).createProxy)(String.raw`C:\Users\stamm\AMPERE WEBAPP\src\app\users\page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[935,910,370,884,627],()=>r(3002));module.exports=t})();