(()=>{var e={};e.id=678,e.ids=[678],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1238:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>c}),t(6516),t(5967),t(5866);var a=t(3191),r=t(8716),l=t(7922),i=t.n(l),n=t(5231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["tenders",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6516)),"C:\\Users\\stamm\\AMPERE WEBAPP\\src\\app\\tenders\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5967)),"C:\\Users\\stamm\\AMPERE WEBAPP\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\stamm\\AMPERE WEBAPP\\src\\app\\tenders\\[id]\\page.tsx"],m="/tenders/[id]/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/tenders/[id]/page",pathname:"/tenders/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9591:(e,s,t)=>{Promise.resolve().then(t.bind(t,1874))},6333:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8787:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},1291:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},1540:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},2714:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8019:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},9015:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},5932:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},2887:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},3685:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},1874:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>R});var a=t(326),r=t(7577),l=t(5047),i=t(434),n=t(4471),d=t(9682),c=t(4396),o=t(9884),m=t(6306),x=t(1223),h=t(6283),p=t(2881);let u=(0,p.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),g=(0,p.Z)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);var y=t(4019),j=t(3685),f=t(9015);let b=(0,p.Z)("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);var N=t(1291),v=t(361),w=t(2714),k=t(1540);let Z=[{value:"contract",label:"Contract",icon:h.Z},{value:"drawing",label:"Drawing",icon:u},{value:"permit",label:"Permit",icon:h.Z},{value:"certificate",label:"Certificate",icon:h.Z},{value:"invoice",label:"Invoice",icon:h.Z},{value:"photo",label:"Photo",icon:u},{value:"report",label:"Report",icon:h.Z},{value:"other",label:"Other",icon:g}],D=[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx",".jpg",".jpeg",".png",".gif",".dwg",".zip",".rar"];function C({isOpen:e,onClose:s,onUpload:t,tenderId:l,existingDocuments:i=[],isLoading:d=!1}){let{user:c}=(0,n.a)(),o=(0,r.useRef)(null),[m,h]=(0,r.useState)([]),[p,u]=(0,r.useState)(!1),[C,P]=(0,r.useState)(!1);if(!e)return null;let M=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]},S=e=>e.toLowerCase().substring(e.lastIndexOf(".")),E=e=>{if(e.size>10485760)return"File size must be less than 10MB";let s=S(e.name);return D.includes(s)?null:`File type ${s} is not allowed`},A=e=>{let s=Z.find(s=>s.value===e);return s?s.icon:g},T=e=>{if(!e)return;let s=[];Array.from(e).forEach(e=>{let t=E(e),a=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`;s.push({file:e,id:a,name:e.name,type:"other",isConfidential:!1,progress:0,error:t||void 0,uploaded:!1})}),h(e=>[...e,...s])},_=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?u(!0):"dragleave"===e.type&&u(!1)},z=(e,s,t)=>{h(a=>a.map(a=>a.id===e?{...a,[s]:t}:a))},L=e=>{h(s=>s.filter(s=>s.id!==e))},U=async()=>{let e=m.filter(e=>!e.error&&!e.uploaded);if(0!==e.length){P(!0);try{for(let s of e){for(let e=0;e<=100;e+=20)z(s.id,"progress",e),await new Promise(e=>setTimeout(e,100));z(s.id,"uploaded",!0)}let a=e.map(e=>({name:e.name,type:e.type,size:e.file.size,uploadedBy:c?.id||"",uploadedAt:new Date,url:"#",tenderId:l,isConfidential:e.isConfidential}));await t(a),s(),h([])}catch(e){console.error("Upload failed:",e)}finally{P(!1)}}},B=m.some(e=>!e.error&&!e.uploaded);return a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:a.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:s})}),(0,a.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[a.jsx("div",{className:"bg-white px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Upload Documents"}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:a.jsx(y.Z,{className:"h-5 w-5"})})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:(0,x.cn)("border-2 border-dashed rounded-lg p-8 text-center transition-colors",p?"border-ampere-500 bg-ampere-50":"border-gray-300 hover:border-gray-400"),onDragEnter:_,onDragLeave:_,onDragOver:_,onDrop:e=>{e.preventDefault(),e.stopPropagation(),u(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&T(e.dataTransfer.files)},children:[a.jsx(j.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Drop files here or click to browse"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-4",children:["Supports: ",D.join(", ")," (Max size: 10MB)"]}),(0,a.jsxs)("button",{type:"button",onClick:()=>o.current?.click(),className:"btn-primary",disabled:C,children:[a.jsx(j.Z,{className:"h-4 w-4 mr-2"}),"Choose Files"]}),a.jsx("input",{ref:o,type:"file",multiple:!0,className:"hidden",onChange:e=>T(e.target.files),accept:D.join(",")})]}),m.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Selected Files"}),a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:m.map(e=>{let s=A(e.type);return a.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx(s,{className:"h-5 w-5 text-gray-400 mt-1"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"font-medium text-gray-900 truncate",children:e.name}),!e.uploaded&&a.jsx("button",{onClick:()=>L(e.id),className:"text-gray-400 hover:text-red-600 ml-2",disabled:C,children:a.jsx(y.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Document Type"}),a.jsx("select",{value:e.type,onChange:s=>z(e.id,"type",s.target.value),className:"w-full text-sm px-2 py-1 border border-gray-300 rounded focus:ring-1 focus:ring-ampere-500 focus:border-ampere-500",disabled:C||e.uploaded,children:Z.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:`confidential-${e.id}`,checked:e.isConfidential,onChange:s=>z(e.id,"isConfidential",s.target.checked),className:"rounded border-gray-300 text-ampere-600 focus:ring-ampere-500",disabled:C||e.uploaded}),a.jsx("label",{htmlFor:`confidential-${e.id}`,className:"text-xs text-gray-600",children:"Confidential"}),e.isConfidential?a.jsx(f.Z,{className:"h-3 w-3 text-red-600"}):a.jsx(b,{className:"h-3 w-3 text-gray-400"})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Size: ",M(e.file.size)]})]}),C&&!e.uploaded&&!e.error&&(0,a.jsxs)("div",{className:"mb-2",children:[a.jsx("div",{className:"bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-ampere-600 h-2 rounded-full transition-all duration-300",style:{width:`${e.progress}%`}})}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Uploading... ",e.progress,"%"]})]}),e.error&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-red-600 text-xs",children:[a.jsx(N.Z,{className:"h-3 w-3"}),a.jsx("span",{children:e.error})]}),e.uploaded&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-green-600 text-xs",children:[a.jsx(v.Z,{className:"h-3 w-3"}),a.jsx("span",{children:"Uploaded successfully"})]})]})]})},e.id)})})]}),i.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Existing Documents"}),a.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:i.map(e=>{let s=A(e.type);return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(s,{className:"h-4 w-4 text-gray-400"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.type," • ",M(e.size),e.isConfidential&&a.jsx("span",{className:"text-red-600 ml-1",children:"• Confidential"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600 rounded",children:a.jsx(w.Z,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600 rounded",children:a.jsx(k.Z,{className:"h-4 w-4"})})]})]},e.id)})})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-between",children:[a.jsx("div",{className:"text-sm text-gray-600",children:m.length>0&&(0,a.jsxs)("span",{children:[m.filter(e=>!e.error).length," file(s) ready to upload"]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{type:"button",onClick:s,className:"btn-secondary",disabled:C,children:"Cancel"}),a.jsx("button",{type:"button",onClick:U,className:"btn-primary",disabled:!B||C||d,children:C?"Uploading...":`Upload ${m.filter(e=>!e.error&&!e.uploaded).length} File(s)`})]})]})]})]})})}var P=t(3468),M=t(6333),S=t(9508),E=t(1821),A=t(8998),T=t(7069),_=t(4061),z=t(8019),L=t(7358),U=t(7636),B=t(8787),q=t(5932),F=t(2887),G=t(8091);let I={open:"Open Tender",selective:"Selective",nominated:"Nominated",negotiated:"Negotiated"},O={opportunity:"bg-blue-100 text-blue-800",preparing:"bg-yellow-100 text-yellow-800",submitted:"bg-purple-100 text-purple-800",under_evaluation:"bg-orange-100 text-orange-800",won:"bg-green-100 text-green-800",lost:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"};function R(){let e;let s=(0,l.useParams)();(0,l.useRouter)();let{user:t}=(0,n.a)(),{clients:p}=(0,d.a)(),{getTender:u,updateTender:g,addDocumentsToTender:b,removeDocumentFromTender:N}=(0,c.i)(),[Z,D]=(0,r.useState)(null),[R,$]=(0,r.useState)(null),[V,W]=(0,r.useState)("overview"),[H,K]=(0,r.useState)(!1),[X,J]=(0,r.useState)(!1),[Q,Y]=(0,r.useState)(!1),[ee,es]=(0,r.useState)("");if(s.id,!t)return null;if(!Z)return a.jsx(o.Z,{user:t,children:(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(P.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Tender Not Found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"The tender you're looking for doesn't exist or has been removed."}),a.jsx(i.default,{href:"/tenders",className:"btn-primary",children:"Back to Tenders"})]})});let et=async e=>{Y(!0),es("");try{await new Promise(e=>setTimeout(e,1e3)),g(Z.id,e),D({...Z,...e,updatedAt:new Date}),es("Tender updated successfully!"),K(!1),setTimeout(()=>{es("")},3e3)}catch(e){console.error("Error updating tender:",e)}finally{Y(!1)}},ea=async e=>{Y(!0);try{if(await new Promise(e=>setTimeout(e,1e3)),b(Z.id,e)){let s=u(Z.id);s&&D(s),es(`${e.length} document(s) uploaded successfully!`),J(!1),setTimeout(()=>{es("")},3e3)}}catch(e){console.error("Error uploading documents:",e)}finally{Y(!1)}},er=async e=>{let s=Z.documents?.find(s=>s.id===e);if(s&&confirm(`Are you sure you want to delete "${s.name}"?`)&&N(Z.id,e)){let e=u(Z.id);e&&D(e),es("Document deleted successfully!"),setTimeout(()=>{es("")},3e3)}},el=(e=>{let s=new Date;return Math.ceil((new Date(e).getTime()-s.getTime())/864e5)})(Z.submissionDeadline);return(0,a.jsxs)(o.Z,{user:t,children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx(i.default,{href:"/tenders",className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:a.jsx(M.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:Z.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 mt-1",children:[a.jsx("span",{className:(0,x.cn)("px-2 py-1 text-xs font-medium rounded-full",O[Z.status]),children:Z.status.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())}),a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:I[Z.type]}),R&&a.jsx("span",{className:"text-sm text-gray-600",children:R.name})]})]})]}),("super_admin"===t.role||"admin"===t.role||"sales"===t.role)&&(0,a.jsxs)("button",{onClick:()=>{K(!0)},className:"btn-primary flex items-center space-x-2",children:[a.jsx(S.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Edit Tender"})]})]}),ee&&(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(v.Z,{className:"h-5 w-5 text-green-600"}),a.jsx("span",{className:"text-green-800 font-medium",children:ee})]}),a.jsx("button",{onClick:()=>es(""),className:"text-green-600 hover:text-green-800 p-1 rounded-lg hover:bg-green-100",children:a.jsx(y.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Estimated Value"}),a.jsx("p",{className:"text-2xl font-bold text-ampere-600",children:(e=Z.estimatedValue,new Intl.NumberFormat("en-SG",{style:"currency",currency:"SGD"}).format(e))})]}),a.jsx(E.Z,{className:"h-8 w-8 text-ampere-600"})]})}),a.jsx("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Days to Deadline"}),a.jsx("p",{className:(0,x.cn)("text-2xl font-bold",el<0?"text-red-600":el<=7?"text-orange-600":"text-blue-600"),children:el<0?Math.abs(el)+" overdue":el})]}),a.jsx(A.Z,{className:(0,x.cn)("h-8 w-8",el<0?"text-red-600":el<=7?"text-orange-600":"text-blue-600")})]})}),a.jsx("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Win Probability"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[Z.winProbability,"%"]})]}),a.jsx(T.Z,{className:"h-8 w-8 text-green-600"})]})}),a.jsx("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Competitors"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Z.competitorCount||0})]}),a.jsx(_.Z,{className:"h-8 w-8 text-gray-600"})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[a.jsx("div",{className:"border-b border-gray-200",children:(0,a.jsxs)("nav",{className:"flex space-x-8 px-6",children:[a.jsx("button",{onClick:()=>W("overview"),className:(0,x.cn)("py-4 px-1 border-b-2 font-medium text-sm","overview"===V?"border-ampere-500 text-ampere-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(z.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Overview"})]})}),a.jsx("button",{onClick:()=>W("documents"),className:(0,x.cn)("py-4 px-1 border-b-2 font-medium text-sm","documents"===V?"border-ampere-500 text-ampere-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(h.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Documents"}),Z.documents&&Z.documents.length>0&&a.jsx("span",{className:"bg-ampere-100 text-ampere-600 text-xs rounded-full px-2 py-1",children:Z.documents.length})]})}),a.jsx("button",{onClick:()=>W("timeline"),className:(0,x.cn)("py-4 px-1 border-b-2 font-medium text-sm","timeline"===V?"border-ampere-500 text-ampere-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(L.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Timeline"})]})})]})}),(0,a.jsxs)("div",{className:"p-6",children:["overview"===V&&(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Description"}),a.jsx("p",{className:"text-gray-900",children:Z.description})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Location"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-gray-900",children:[a.jsx(U.Z,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{children:Z.location.street})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-gray-600 text-sm mt-1",children:[(0,a.jsxs)("span",{children:["\uD83D\uDCEE ",Z.location.postalCode]}),Z.location.district&&(0,a.jsxs)("span",{children:["• ",Z.location.district]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Submission Deadline"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(L.Z,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:(0,x.cn)("font-medium",el<0?"text-red-600":el<=7?"text-orange-600":"text-gray-900"),children:new Date(Z.submissionDeadline).toLocaleDateString("en-SG",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[R&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Client Information"}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(B.Z,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"font-medium text-gray-900",children:R.name})]}),R.email&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[a.jsx(q.Z,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{children:R.email})]}),R.phone&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[a.jsx(F.Z,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{children:R.phone})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Competition Analysis"}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Competitors:"}),a.jsx("span",{className:"font-medium",children:Z.competitorCount||"Unknown"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Win Probability:"}),(0,a.jsxs)("span",{className:"font-medium text-green-600",children:[Z.winProbability,"%"]})]})]})]})]})]})]}),Z.requirements&&Z.requirements.length>0&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Requirements"}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:a.jsx("ul",{className:"space-y-2",children:Z.requirements.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start space-x-2",children:[a.jsx("span",{className:"text-ampere-600 font-bold text-sm mt-0.5",children:"•"}),a.jsx("span",{className:"text-gray-900",children:e})]},s))})})]}),(Z.startDate||Z.completionDate)&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Project Timeline"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Z.startDate&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(L.Z,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Project Start"})]}),a.jsx("p",{className:"font-medium",children:new Date(Z.startDate).toLocaleDateString("en-SG")})]}),Z.completionDate&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(v.Z,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Expected Completion"})]}),a.jsx("p",{className:"font-medium",children:new Date(Z.completionDate).toLocaleDateString("en-SG")})]})]})]})]}),"documents"===V&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Documents"}),("super_admin"===t.role||"admin"===t.role||"sales"===t.role)&&(0,a.jsxs)("button",{onClick:()=>J(!0),className:"btn-primary flex items-center space-x-2",disabled:Q,children:[a.jsx(j.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Upload Document"})]})]}),Z.documents&&Z.documents.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Z.documents.map(e=>{let s=(e.type,h.Z);return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(s,{className:"h-5 w-5 text-ampere-600"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-gray-900 truncate",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-500 mt-1",children:[a.jsx("span",{className:"capitalize",children:e.type}),a.jsx("span",{children:"•"}),(0,a.jsxs)("span",{children:[((e.size||0)/1024).toFixed(1)," KB"]}),e.isConfidential&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("span",{children:"•"}),(0,a.jsxs)("span",{className:"text-red-600 font-medium flex items-center",children:[a.jsx(f.Z,{className:"h-3 w-3 mr-1"}),"Confidential"]})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded",title:"View Document",children:a.jsx(w.Z,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded",title:"Download Document",children:a.jsx(k.Z,{className:"h-4 w-4"})}),("super_admin"===t.role||"admin"===t.role)&&a.jsx("button",{onClick:()=>er(e.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete Document",children:a.jsx(G.Z,{className:"h-4 w-4"})})]})]}),a.jsx("div",{className:"border-t border-gray-100 pt-3",children:(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,a.jsxs)("p",{children:["Uploaded by ",e.uploadedBy]}),a.jsx("p",{children:new Date(e.uploadedAt).toLocaleDateString("en-SG",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})})]},e.id)})}):(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(h.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Documents"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"No documents have been uploaded for this tender yet."}),("super_admin"===t.role||"admin"===t.role||"sales"===t.role)&&(0,a.jsxs)("button",{onClick:()=>J(!0),className:"btn-primary",children:[a.jsx(j.Z,{className:"h-4 w-4 mr-2"}),"Upload First Document"]})]})]}),"timeline"===V&&(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Timeline & Activities"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Tender Created"}),a.jsx("p",{className:"text-sm text-gray-600",children:new Date(Z.createdAt).toLocaleDateString("en-SG",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Last Updated"}),a.jsx("p",{className:"text-sm text-gray-600",children:new Date(Z.updatedAt).toLocaleDateString("en-SG",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:(0,x.cn)("w-2 h-2 rounded-full mt-2",el<0?"bg-red-500":el<=7?"bg-orange-500":"bg-gray-400")}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Submission Deadline"}),a.jsx("p",{className:"text-sm text-gray-600",children:new Date(Z.submissionDeadline).toLocaleDateString("en-SG",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),el<0&&(0,a.jsxs)("p",{className:"text-sm text-red-600 font-medium",children:["⚠️ ",Math.abs(el)," days overdue"]})]})]})]})]})]})]})]}),a.jsx(m.Z,{tender:Z,isOpen:H,onClose:()=>K(!1),onSave:et,mode:"edit",isLoading:Q}),a.jsx(C,{isOpen:X,onClose:()=>J(!1),onUpload:ea,tenderId:Z.id,existingDocuments:Z.documents||[],isLoading:Q})]})}},6516:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`C:\Users\stamm\AMPERE WEBAPP\src\app\tenders\[id]\page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[935,910,370,884,454],()=>t(1238));module.exports=a})();