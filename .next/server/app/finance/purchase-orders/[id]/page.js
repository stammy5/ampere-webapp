(()=>{var e={};e.id=997,e.ids=[997],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8863:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>o,originalPathname:()=>x,pages:()=>m,routeModule:()=>h,tree:()=>d}),t(2949),t(5967),t(5866);var a=t(3191),r=t(8716),n=t(7922),i=t.n(n),l=t(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d=["",{children:["finance",{children:["purchase-orders",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2949)),"C:\\Users\\stamm\\AMPERE WEBAPP\\src\\app\\finance\\purchase-orders\\[id]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5967)),"C:\\Users\\stamm\\AMPERE WEBAPP\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],m=["C:\\Users\\stamm\\AMPERE WEBAPP\\src\\app\\finance\\purchase-orders\\[id]\\page.tsx"],x="/finance/purchase-orders/[id]/page",o={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/finance/purchase-orders/[id]/page",pathname:"/finance/purchase-orders/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3594:(e,s,t)=>{Promise.resolve().then(t.bind(t,645))},1540:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},5932:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},2887:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},7671:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},645:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>S});var a=t(326),r=t(7577),n=t(5047),i=t(434),l=t(4471),c=t(849),d=t(9982),m=t(1293),x=t(9682),o=t(9884),h=t(4731),p=t(949),g=t(6333),j=t(1540),u=t(9508),y=t(361),N=t(4019),b=t(7671),v=t(7358),f=t(8998),w=t(8787),P=t(5932),D=t(2887),k=t(1223);let A={draft:"bg-gray-100 text-gray-800",pending_approval:"bg-yellow-100 text-yellow-800",approved:"bg-blue-100 text-blue-800",sent:"bg-indigo-100 text-indigo-800",partially_received:"bg-purple-100 text-purple-800",received:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",closed:"bg-gray-100 text-gray-800"},C={draft:"Draft",pending_approval:"Pending Approval",approved:"Approved",sent:"Sent",partially_received:"Partially Received",received:"Received",cancelled:"Cancelled",closed:"Closed"};function S(){let e=(0,n.useParams)();(0,n.useRouter)();let{user:s}=(0,l.a)(),{getPurchaseOrder:t,updatePurchaseOrder:S}=(0,c._)(),{getVendor:Z}=(0,d.R)(),{getProject:E}=(0,m.Z)(),{clients:_}=(0,x.a)(),M=t(e.id),[I,G]=(0,r.useState)("overview"),[R,q]=(0,r.useState)(!1),[L,T]=(0,r.useState)(!1),[V,O]=(0,r.useState)("");if(!M)return a.jsx(o.Z,{user:s||{id:"",name:"Guest",role:"finance",email:"",isActive:!0,createdAt:new Date,assignedProjects:[],permissions:{projects:{canViewAllProjects:!1,canEditAssignedProjects:!1,canCreateProjects:!1,canDeleteProjects:!1,canManageTeam:!1},finance:{canViewFinance:!0,canEditInvoices:!0,canDeleteInvoices:!1,canViewReports:!0,canManagePayments:!0},clients:{canViewClients:!0,canEditClients:!1,canCreateClients:!1,canDeleteClients:!1},system:{canManageUsers:!1,canViewAuditLogs:!1,canManageSettings:!1,canViewReports:!0}}},children:a.jsx("div",{className:"flex items-center justify-center h-96",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(p.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Purchase Order Not Found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"The purchase order you're looking for doesn't exist."}),a.jsx(i.default,{href:"/finance",className:"btn-primary",children:"Back to Finance"})]})})});let U=Z(M.vendorId),F=E(M.projectId),B=F?_.find(e=>e.id===F.clientId):null,H=e=>new Intl.NumberFormat("en-SG",{style:"currency",currency:"SGD"}).format(e),W=async e=>{T(!0);try{await new Promise(e=>setTimeout(e,1e3)),S(M.id,e),O("Purchase order updated successfully!"),q(!1),setTimeout(()=>O(""),3e3)}catch(e){console.error("Error updating purchase order:",e)}finally{T(!1)}},z=s?.role==="super_admin"||s?.role==="admin"||s?.role==="finance";return s?(0,a.jsxs)(o.Z,{user:s||{id:"",name:"Guest",role:"finance",email:"",isActive:!0,createdAt:new Date,assignedProjects:[],permissions:{projects:{canViewAllProjects:!1,canEditAssignedProjects:!1,canCreateProjects:!1,canDeleteProjects:!1,canManageTeam:!1},finance:{canViewFinance:!0,canEditInvoices:!0,canDeleteInvoices:!1,canViewReports:!0,canManagePayments:!0},clients:{canViewClients:!0,canEditClients:!1,canCreateClients:!1,canDeleteClients:!1},system:{canManageUsers:!1,canViewAuditLogs:!1,canManageSettings:!1,canViewReports:!0}}},children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx(i.default,{href:"/finance",className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:a.jsx(g.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:M.poNumber}),(0,a.jsxs)("p",{className:"text-gray-600",children:[U?.name," â€¢ ",H(M.totalAmount)]})]})]}),z&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("button",{className:"btn-secondary flex items-center space-x-2",children:[a.jsx(j.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Download PDF"})]}),(0,a.jsxs)("button",{onClick:()=>q(!0),className:"btn-secondary flex items-center space-x-2",children:[a.jsx(u.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Edit Purchase Order"})]})]})]}),V&&(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(y.Z,{className:"h-5 w-5 text-green-600"}),a.jsx("span",{className:"text-green-800 font-medium",children:V})]}),a.jsx("button",{onClick:()=>O(""),className:"text-green-600 hover:text-green-800",children:a.jsx(N.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"PO Total"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:H(M.totalAmount)})]}),a.jsx(b.Z,{className:"h-8 w-8 text-gray-600"})]})}),a.jsx("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Status"}),a.jsx("span",{className:(0,k.cn)("px-2 py-1 text-xs font-medium rounded-full",A[M.status]),children:C[M.status]})]}),a.jsx(y.Z,{className:"h-8 w-8 text-gray-600"})]})}),a.jsx("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Issue Date"}),a.jsx("p",{className:"text-lg font-bold text-gray-900",children:new Date(M.issueDate).toLocaleDateString()})]}),a.jsx(v.Z,{className:"h-8 w-8 text-gray-600"})]})}),a.jsx("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Required By"}),a.jsx("p",{className:"text-lg font-bold text-gray-900",children:new Date(M.requiredDate).toLocaleDateString()})]}),a.jsx(f.Z,{className:"h-8 w-8 text-gray-600"})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[a.jsx("div",{className:"border-b border-gray-200",children:(0,a.jsxs)("nav",{className:"flex space-x-8 px-6",children:[a.jsx("button",{onClick:()=>G("overview"),className:(0,k.cn)("py-4 px-1 border-b-2 font-medium text-sm","overview"===I?"border-ampere-500 text-ampere-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Overview"}),(0,a.jsxs)("button",{onClick:()=>G("items"),className:(0,k.cn)("py-4 px-1 border-b-2 font-medium text-sm","items"===I?"border-ampere-500 text-ampere-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["Items (",M.items.length,")"]}),a.jsx("button",{onClick:()=>G("history"),className:(0,k.cn)("py-4 px-1 border-b-2 font-medium text-sm","history"===I?"border-ampere-500 text-ampere-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"History"})]})}),(0,a.jsxs)("div",{className:"p-6",children:["overview"===I&&(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Purchase Order Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Title"}),a.jsx("p",{className:"text-gray-900",children:M.title})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Description"}),a.jsx("p",{className:"text-gray-900",children:M.description||"No description provided"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Issue Date"}),a.jsx("p",{className:"text-gray-900",children:new Date(M.issueDate).toLocaleDateString("en-SG")})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Required Date"}),a.jsx("p",{className:"text-gray-900",children:new Date(M.requiredDate).toLocaleDateString("en-SG")})]}),M.deliveryDate&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Delivery Date"}),a.jsx("p",{className:"text-gray-900",children:new Date(M.deliveryDate).toLocaleDateString("en-SG")})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[U&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Vendor Information"}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(w.Z,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"font-medium text-gray-900",children:U.name})]}),U.email&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[a.jsx(P.Z,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{children:U.email})]}),U.phone&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[a.jsx(D.Z,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{children:U.phone})]})]})]}),F&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Project"}),a.jsx("p",{className:"text-gray-900",children:F.name})]}),B&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Client"}),a.jsx("p",{className:"text-gray-900",children:B.name})]})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Financial Summary"}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),a.jsx("span",{className:"font-medium",children:H(M.subtotal)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"GST (7%):"}),a.jsx("span",{className:"font-medium",children:H(M.gst)})]}),M.discount&&M.discount>0&&(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Discount:"}),(0,a.jsxs)("span",{className:"font-medium text-red-600",children:["-",H(M.discount)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t border-gray-200 pt-3",children:[a.jsx("span",{children:"Total Amount:"}),a.jsx("span",{className:"text-ampere-600",children:H(M.totalAmount)})]})]})})]}),M.terms&&M.terms.length>0&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Terms & Conditions"}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:a.jsx("ul",{className:"space-y-2",children:M.terms.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start space-x-2",children:[a.jsx("span",{className:"text-ampere-600 font-bold text-sm mt-0.5",children:"â€¢"}),a.jsx("span",{className:"text-gray-900",children:e})]},s))})})]}),M.notes&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Notes"}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:a.jsx("p",{className:"text-gray-900",children:M.notes})})]})]}),"items"===I&&(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Purchase Order Items"})}),M.items.length>0?(0,a.jsxs)("div",{className:"space-y-4",children:[M.items.map((e,s)=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Description"}),a.jsx("p",{className:"font-medium text-gray-900",children:e.description}),e.notes&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.notes})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Quantity"}),(0,a.jsxs)("p",{className:"text-gray-900",children:[e.quantity," ",e.unit]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Unit Price"}),a.jsx("p",{className:"text-gray-900",children:H(e.unitPrice)})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Category"}),a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded-full",children:e.category})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Total Price"}),a.jsx("p",{className:"font-bold text-ampere-600",children:H(e.totalPrice)})]})]})},e.id)),a.jsx("div",{className:"bg-ampere-50 rounded-lg p-4 border border-ampere-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"font-medium text-ampere-800",children:["Total: ",M.items.length," item",1!==M.items.length?"s":""]}),a.jsx("span",{className:"font-bold text-ampere-800",children:H(M.subtotal)})]})})]}):(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(b.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Items"}),a.jsx("p",{className:"text-gray-600",children:"This purchase order doesn't have any items yet."})]})]}),"history"===I&&(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Purchase Order History"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Purchase Order Created"}),a.jsx("p",{className:"text-sm text-gray-600",children:new Date(M.createdAt).toLocaleDateString("en-SG",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Last Updated"}),a.jsx("p",{className:"text-sm text-gray-600",children:new Date(M.updatedAt).toLocaleDateString("en-SG",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),M.approvedDate&&(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Purchase Order Approved"}),a.jsx("p",{className:"text-sm text-gray-600",children:new Date(M.approvedDate).toLocaleDateString("en-SG",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]})]})]})]})]})]}),a.jsx(h.Z,{purchaseOrder:M,projectId:M.projectId,isOpen:R,onClose:()=>q(!1),onSave:W,mode:"edit",isLoading:L})]}):null}},2949:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`C:\Users\stamm\AMPERE WEBAPP\src\app\finance\purchase-orders\[id]\page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[935,910,370,884,607],()=>t(8863));module.exports=a})();