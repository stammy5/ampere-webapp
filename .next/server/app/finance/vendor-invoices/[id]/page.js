(()=>{var e={};e.id=735,e.ids=[735],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6974:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>o,originalPathname:()=>m,pages:()=>x,routeModule:()=>h,tree:()=>d}),t(7205),t(5967),t(5866);var a=t(3191),r=t(8716),n=t(7922),i=t.n(n),c=t(5231),l={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>c[e]);t.d(s,l);let d=["",{children:["finance",{children:["vendor-invoices",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7205)),"C:\\Users\\stamm\\AMPERE WEBAPP\\src\\app\\finance\\vendor-invoices\\[id]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5967)),"C:\\Users\\stamm\\AMPERE WEBAPP\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],x=["C:\\Users\\stamm\\AMPERE WEBAPP\\src\\app\\finance\\vendor-invoices\\[id]\\page.tsx"],m="/finance/vendor-invoices/[id]/page",o={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/finance/vendor-invoices/[id]/page",pathname:"/finance/vendor-invoices/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8777:(e,s,t)=>{Promise.resolve().then(t.bind(t,8255))},6333:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7358:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},361:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8998:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8916:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},1540:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},2714:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9508:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},8091:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},8255:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Z});var a=t(326),r=t(7577),n=t(5047),i=t(434),c=t(4471),l=t(9209),d=t(9982),x=t(1293),m=t(9884),o=t(165),h=t(6283),p=t(6333),u=t(1540),j=t(9508),y=t(8091),g=t(361),f=t(7358),v=t(2714),N=t(8916),b=t(1821),w=t(8998);let k={draft:"bg-gray-100 text-gray-800",received:"bg-blue-100 text-blue-800",processing:"bg-yellow-100 text-yellow-800",processed:"bg-indigo-100 text-indigo-800",approved:"bg-purple-100 text-purple-800",paid:"bg-green-100 text-green-800",overdue:"bg-red-100 text-red-800",cancelled:"bg-red-100 text-red-800"},P={draft:"Draft",received:"Received",processing:"Processing",processed:"Processed",approved:"Approved",paid:"Paid",overdue:"Overdue",cancelled:"Cancelled"};function Z(){let{id:e}=(0,n.useParams)(),{user:s,canAccessFinance:t}=(0,c.a)(),{vendorInvoices:Z,getVendorInvoicePayments:D,updateVendorInvoice:A,deleteVendorInvoice:M}=(0,l.p)(),{vendors:C}=(0,d.R)(),{projects:E}=(0,x.Z)(),[_,R]=(0,r.useState)(),[S,I]=(0,r.useState)([]),[q,T]=(0,r.useState)(!0),[V,B]=(0,r.useState)("");if(!s)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Authentication Required"}),a.jsx("p",{className:"text-gray-600",children:"Please log in to access this page."})]})});if(!t())return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(o.Z,{className:"h-8 w-8 text-red-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have permission to access the Vendor Invoices module. This area is restricted to Finance team members, Administrators, and Super Administrators."}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Current role: ",a.jsx("span",{className:"font-medium",children:s.role.replace("_"," ").toUpperCase()})]})]})});let G=e=>new Intl.NumberFormat("en-SG",{style:"currency",currency:"SGD"}).format(e),U=e=>new Date(e).toLocaleDateString();if(q)return a.jsx(m.Z,{user:s,children:a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-ampere-500"})})});if(!_)return a.jsx(m.Z,{user:s,children:(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(h.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Vendor Invoice Not Found"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"The vendor invoice you're looking for doesn't exist or has been deleted."}),a.jsx(i.default,{href:"/finance/vendor-invoices",className:"btn-primary",children:"Back to Vendor Invoices"})]})});let z=S.reduce((e,s)=>e+s.amount,0),F=_.totalAmount-z;return a.jsx(m.Z,{user:s,children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx(i.default,{href:"/finance/vendor-invoices",className:"btn-icon",children:a.jsx(p.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:_.invoiceNumber}),a.jsx("p",{className:"text-gray-600",children:"Vendor Invoice Details"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("button",{className:"btn-secondary flex items-center space-x-2",children:[a.jsx(u.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Download"})]}),(0,a.jsxs)("button",{className:"btn-secondary flex items-center space-x-2",children:[a.jsx(j.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Edit"})]}),(0,a.jsxs)("button",{onClick:()=>{_&&confirm(`Are you sure you want to delete vendor invoice ${_.invoiceNumber}?`)&&(M(_.id),window.location.href="/finance/vendor-invoices")},className:"btn-danger flex items-center space-x-2",children:[a.jsx(y.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Delete"})]})]})]}),V&&(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(g.Z,{className:"h-5 w-5 text-green-600"}),a.jsx("span",{className:"text-green-800 font-medium",children:V})]}),a.jsx("button",{onClick:()=>B(""),className:"text-green-600 hover:text-green-800 p-1 rounded-lg hover:bg-green-100",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Invoice Information"}),a.jsx("span",{className:`
                  px-3 py-1 text-sm font-medium rounded-full
                  ${k[_.status]}
                `,children:P[_.status]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Vendor"}),a.jsx("p",{className:"text-gray-900",children:(e=>{let s=C.find(s=>s.id===e);return s?.name||"Unknown Vendor"})(_.vendorId)})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Project"}),a.jsx("p",{className:"text-gray-900",children:(e=>{if(!e)return"No Project";let s=E.find(s=>s.id===e);return s?.name||"Unknown Project"})(_.projectId)})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Issue Date"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(f.Z,{className:"h-4 w-4 text-gray-400"}),a.jsx("p",{className:"text-gray-900",children:U(new Date(_.issueDate))})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Due Date"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(f.Z,{className:"h-4 w-4 text-gray-400"}),a.jsx("p",{className:"text-gray-900",children:U(new Date(_.dueDate))})]})]}),_.paidDate&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Paid Date"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(g.Z,{className:"h-4 w-4 text-gray-400"}),a.jsx("p",{className:"text-gray-900",children:U(new Date(_.paidDate))})]})]}),_.fileName&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Attached File"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(v.Z,{className:"h-4 w-4 text-gray-400"}),a.jsx("p",{className:"text-gray-900",children:_.fileName})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Financial Summary"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Subtotal"}),a.jsx("span",{className:"text-gray-900",children:G(_.amount)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"GST (7%)"}),a.jsx("span",{className:"text-gray-900",children:G(_.gstAmount)})]}),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-4 flex justify-between font-semibold",children:[a.jsx("span",{className:"text-gray-900",children:"Total Amount"}),a.jsx("span",{className:"text-gray-900",children:G(_.totalAmount)})]}),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-4 flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Total Payments"}),a.jsx("span",{className:"text-green-600",children:G(z)})]}),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-4 flex justify-between font-semibold",children:[a.jsx("span",{className:"text-gray-900",children:"Balance Due"}),a.jsx("span",{className:F>0?"text-red-600":"text-green-600",children:G(F)})]})]})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Payments"}),a.jsx("button",{className:"btn-primary text-sm",children:"Record Payment"})]}),S.length>0?a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(e=>(0,a.jsxs)("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:U(new Date(e.receivedDate))}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 capitalize",children:e.method.replace("_"," ")}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.reference}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600 text-right",children:G(e.amount)})]},e.id))})]})}):(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(N.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Payments Recorded"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"No payments have been made for this vendor invoice yet."}),a.jsx("button",{className:"btn-primary",children:"Record First Payment"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Actions"}),(0,a.jsxs)("div",{className:"space-y-3",children:["processed"===_.status&&(0,a.jsxs)("button",{onClick:()=>{_&&(A(_.id,{status:"approved"}),B("Vendor invoice approved successfully!"),setTimeout(()=>B(""),3e3))},className:"w-full btn-primary flex items-center justify-center space-x-2",children:[a.jsx(g.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Approve Invoice"})]}),"paid"!==_.status&&(0,a.jsxs)("button",{onClick:()=>{_&&(A(_.id,{status:"paid",paidDate:new Date}),B("Vendor invoice marked as paid!"),setTimeout(()=>B(""),3e3))},className:"w-full btn-secondary flex items-center justify-center space-x-2",children:[a.jsx(b.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Mark as Paid"})]}),(0,a.jsxs)("button",{className:"w-full btn-secondary flex items-center justify-center space-x-2",children:[a.jsx(u.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Download Invoice"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status Timeline"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:a.jsx(g.Z,{className:"h-4 w-4 text-green-600"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Invoice Received"}),a.jsx("p",{className:"text-xs text-gray-500",children:U(new Date(_.createdAt))})]})]}),"received"!==_.status&&(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:a.jsx(w.Z,{className:"h-4 w-4 text-blue-600"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Processing"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Data extraction and validation"})]})]}),"processed"===_.status&&(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center",children:a.jsx(h.Z,{className:"h-4 w-4 text-indigo-600"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Processed"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Ready for approval"})]})]}),"approved"===_.status&&(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center",children:a.jsx(g.Z,{className:"h-4 w-4 text-purple-600"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Approved"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Ready for payment"})]})]}),"paid"===_.status&&(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:a.jsx(b.Z,{className:"h-4 w-4 text-green-600"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Paid"}),a.jsx("p",{className:"text-xs text-gray-500",children:_.paidDate&&U(new Date(_.paidDate))})]})]})]})]})]})]})]})})}},7205:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`C:\Users\stamm\AMPERE WEBAPP\src\app\finance\vendor-invoices\[id]\page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[935,910,370,884],()=>t(6974));module.exports=a})();