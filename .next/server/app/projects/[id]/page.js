(()=>{var e={};e.id=948,e.ids=[948],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5430:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c}),s(8231),s(5967),s(5866);var a=s(3191),r=s(8716),l=s(7922),n=s.n(l),d=s(5231),i={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>d[e]);s.d(t,i);let c=["",{children:["projects",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8231)),"C:\\Users\\stamm\\AMPERE WEBAPP\\src\\app\\projects\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5967)),"C:\\Users\\stamm\\AMPERE WEBAPP\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\stamm\\AMPERE WEBAPP\\src\\app\\projects\\[id]\\page.tsx"],m="/projects/[id]/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/projects/[id]/page",pathname:"/projects/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6404:(e,t,s)=>{Promise.resolve().then(s.bind(s,2372))},2714:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3468:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},2372:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Q});var a=s(326),r=s(7577),l=s(5047),n=s(434),d=s(4471),i=s(9682),c=s(1293),o=s(9982),m=s(849),x=s(2588),u=s(9884),p=s(3498),g=s(1223),h=s(361),b=s(4019),j=s(1215);let y=[{value:"building_plan",label:"Building Plan Approval"},{value:"structural_plan",label:"Structural Plan Approval"},{value:"demolition_permit",label:"Demolition Permit"},{value:"hacking_permit",label:"Hacking Permit"},{value:"renovation_permit",label:"Renovation Permit"},{value:"aanda_permit",label:"A&A Permit"}],v=[{value:"draft",label:"Draft"},{value:"submitted",label:"Submitted"},{value:"under_review",label:"Under Review"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"},{value:"expired",label:"Expired"}],f=[{value:"bca",label:"Building and Construction Authority (BCA)"},{value:"ura",label:"Urban Redevelopment Authority (URA)"},{value:"hdb",label:"Housing Development Board (HDB)"},{value:"scdf",label:"Singapore Civil Defence Force (SCDF)"},{value:"nea",label:"National Environment Agency (NEA)"},{value:"pub",label:"Public Utilities Board (PUB)"}];function N({permit:e,isOpen:t,onClose:s,onSave:l,mode:n,isLoading:d=!1}){let[i,c]=(0,r.useState)({type:e?.type||"renovation_permit",applicationNumber:e?.applicationNumber||"",status:e?.status||"draft",submittedDate:e?.submittedDate?e.submittedDate.toISOString().split("T")[0]:new Date().toISOString().split("T")[0],approvedDate:e?.approvedDate?e.approvedDate.toISOString().split("T")[0]:"",expiryDate:e?.expiryDate?e.expiryDate.toISOString().split("T")[0]:"",authority:e?.authority||"bca",fee:e?.fee||0,notes:e?.notes||""}),[o,m]=(0,r.useState)({}),x=(e,t)=>{c(s=>({...s,[e]:t})),o[e]&&m(t=>({...t,[e]:""}))},u=()=>{let e={};i.applicationNumber.trim()||(e.applicationNumber="Application number is required"),i.submittedDate||(e.submittedDate="Submitted date is required"),i.fee<0&&(e.fee="Fee cannot be negative");let t=new Date(i.submittedDate),s=i.approvedDate?new Date(i.approvedDate):null,a=i.expiryDate?new Date(i.expiryDate):null;return s&&s<t&&(e.approvedDate="Approved date cannot be before submitted date"),a&&a<t&&(e.expiryDate="Expiry date cannot be before submitted date"),"approved"!==i.status||i.approvedDate||(e.approvedDate="Approved date is required when status is approved"),m(e),0===Object.keys(e).length},p=async t=>{if(t.preventDefault(),!u())return;let s={type:i.type,applicationNumber:i.applicationNumber.trim(),status:i.status,submittedDate:new Date(i.submittedDate),approvedDate:i.approvedDate?new Date(i.approvedDate):void 0,expiryDate:i.expiryDate?new Date(i.expiryDate):void 0,authority:i.authority,fee:i.fee,documents:e?.documents||[],notes:i.notes.trim()||void 0};await l(s)};return t?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:a.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:s})}),(0,a.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[a.jsx("div",{className:"bg-white px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx(h.Z,{className:"h-5 w-5 text-green-600"})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"add"===n?"Add Construction Permit":"Edit Permit"}),a.jsx("p",{className:"text-sm text-gray-600",children:"add"===n?"Add a new construction permit to this project":"Update permit information"})]})]}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 p-2 rounded-lg hover:bg-gray-100",children:a.jsx(b.Z,{className:"h-5 w-5"})})]})}),(0,a.jsxs)("form",{onSubmit:p,className:"p-6",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Permit Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Permit Type *"}),a.jsx("select",{value:i.type,onChange:e=>x("type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:y.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Application Number *"}),a.jsx("input",{type:"text",value:i.applicationNumber,onChange:e=>x("applicationNumber",e.target.value),className:(0,g.cn)("w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",o.applicationNumber?"border-red-300":"border-gray-300"),placeholder:"Enter application number"}),o.applicationNumber&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.applicationNumber})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),a.jsx("select",{value:i.status,onChange:e=>x("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:v.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Authority *"}),a.jsx("select",{value:i.authority,onChange:e=>x("authority",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:f.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Dates & Fees"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Submitted Date *"}),a.jsx("input",{type:"date",value:i.submittedDate,onChange:e=>x("submittedDate",e.target.value),className:(0,g.cn)("w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",o.submittedDate?"border-red-300":"border-gray-300")}),o.submittedDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.submittedDate})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Approved Date"}),a.jsx("input",{type:"date",value:i.approvedDate,onChange:e=>x("approvedDate",e.target.value),className:(0,g.cn)("w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",o.approvedDate?"border-red-300":"border-gray-300")}),o.approvedDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.approvedDate})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),a.jsx("input",{type:"date",value:i.expiryDate,onChange:e=>x("expiryDate",e.target.value),className:(0,g.cn)("w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",o.expiryDate?"border-red-300":"border-gray-300")}),o.expiryDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.expiryDate})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fee (SGD)"}),a.jsx("input",{type:"number",value:i.fee,onChange:e=>x("fee",parseFloat(e.target.value)||0),className:(0,g.cn)("w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",o.fee?"border-red-300":"border-gray-300"),placeholder:"0.00",min:"0",step:"0.01"}),o.fee&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.fee})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),a.jsx("textarea",{value:i.notes,onChange:e=>x("notes",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",rows:3,placeholder:"Additional notes about the permit..."})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 mt-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:s,disabled:d,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:d,className:"btn-primary flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:d?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"add"===n?"Adding...":"Saving..."})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(j.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"add"===n?"Add Permit":"Save Changes"})]})})]})]})]})]})}):null}var w=s(3468);let D=[{value:"pending",label:"Pending",color:"text-gray-800 bg-gray-100"},{value:"in_progress",label:"In Progress",color:"text-blue-800 bg-blue-100"},{value:"completed",label:"Completed",color:"text-green-800 bg-green-100"},{value:"delayed",label:"Delayed",color:"text-red-800 bg-red-100"},{value:"cancelled",label:"Cancelled",color:"text-gray-800 bg-gray-100"}];function C({milestone:e,isOpen:t,onClose:s,onSave:l,mode:n,isLoading:d=!1,availableMilestones:i=[]}){let[c,o]=(0,r.useState)({name:e?.name||"",description:e?.description||"",targetDate:e?.targetDate?e.targetDate.toISOString().split("T")[0]:"",actualDate:e?.actualDate?e.actualDate.toISOString().split("T")[0]:"",status:e?.status||"pending",dependencies:e?.dependencies||[],completionPercentage:e?.completionPercentage||0}),[m,x]=(0,r.useState)({}),u=(e,t)=>{o(s=>({...s,[e]:t})),m[e]&&x(t=>({...t,[e]:""}))},p=(e,t)=>{o(s=>({...s,dependencies:t?[...s.dependencies,e]:s.dependencies.filter(t=>t!==e)}))},h=()=>{let e={};if(c.name.trim()||(e.name="Milestone name is required"),c.description.trim()||(e.description="Description is required"),c.targetDate||(e.targetDate="Target date is required"),(c.completionPercentage<0||c.completionPercentage>100)&&(e.completionPercentage="Completion percentage must be between 0 and 100"),c.actualDate&&c.targetDate){let e=new Date(c.targetDate);new Date(c.actualDate)<e&&c.status}return"completed"===c.status&&(c.actualDate||(e.actualDate="Actual completion date is required when status is completed"),100!==c.completionPercentage&&(e.completionPercentage="Completion percentage must be 100% when status is completed")),"in_progress"===c.status&&0===c.completionPercentage&&(e.completionPercentage="In progress milestones should have some completion percentage"),x(e),0===Object.keys(e).length},y=async e=>{if(e.preventDefault(),!h())return;let t={name:c.name.trim(),description:c.description.trim(),targetDate:new Date(c.targetDate),actualDate:c.actualDate?new Date(c.actualDate):void 0,status:c.status,dependencies:c.dependencies,completionPercentage:c.completionPercentage};await l(t)},v=i.filter(t=>t.id!==e?.id);return t?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:a.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:s})}),(0,a.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[a.jsx("div",{className:"bg-white px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(w.Z,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"add"===n?"Add Project Milestone":"Edit Milestone"}),a.jsx("p",{className:"text-sm text-gray-600",children:"add"===n?"Add a new milestone to track project progress":"Update milestone information"})]})]}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 p-2 rounded-lg hover:bg-gray-100",children:a.jsx(b.Z,{className:"h-5 w-5"})})]})}),(0,a.jsxs)("form",{onSubmit:y,className:"p-6 max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Milestone Information"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Milestone Name *"}),a.jsx("input",{type:"text",value:c.name,onChange:e=>u("name",e.target.value),className:(0,g.cn)("w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",m.name?"border-red-300":"border-gray-300"),placeholder:"Enter milestone name"}),m.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.name})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),a.jsx("textarea",{value:c.description,onChange:e=>u("description",e.target.value),className:(0,g.cn)("w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",m.description?"border-red-300":"border-gray-300"),rows:3,placeholder:"Describe what needs to be accomplished..."}),m.description&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.description})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Status & Progress"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),a.jsx("select",{value:c.status,onChange:e=>u("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:D.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Completion Percentage"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"number",value:c.completionPercentage,onChange:e=>u("completionPercentage",parseInt(e.target.value)||0),className:(0,g.cn)("w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",m.completionPercentage?"border-red-300":"border-gray-300"),placeholder:"0",min:"0",max:"100"}),a.jsx("span",{className:"text-sm text-gray-500",children:"%"})]}),m.completionPercentage&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.completionPercentage})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Timeline"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Target Date *"}),a.jsx("input",{type:"date",value:c.targetDate,onChange:e=>u("targetDate",e.target.value),className:(0,g.cn)("w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",m.targetDate?"border-red-300":"border-gray-300")}),m.targetDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.targetDate})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Actual Completion Date"}),a.jsx("input",{type:"date",value:c.actualDate,onChange:e=>u("actualDate",e.target.value),className:(0,g.cn)("w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",m.actualDate?"border-red-300":"border-gray-300")}),m.actualDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.actualDate})]})]})]}),v.length>0&&(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Dependencies"}),(0,a.jsxs)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Select milestones that must be completed before this one:"}),v.map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50",children:[a.jsx("input",{type:"checkbox",checked:c.dependencies.includes(e.id),onChange:t=>p(e.id,t.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.name}),a.jsx("p",{className:"text-xs text-gray-500",children:e.description})]}),a.jsx("span",{className:(0,g.cn)("px-2 py-1 text-xs font-medium rounded-full",D.find(t=>t.value===e.status)?.color),children:D.find(t=>t.value===e.status)?.label})]},e.id))]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 mt-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:s,disabled:d,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:d,className:"btn-primary flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:d?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"add"===n?"Adding...":"Saving..."})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(j.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"add"===n?"Add Milestone":"Save Changes"})]})})]})]})]})]})}):null}let P=(0,s(2881).Z)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),A=[{value:"assigned",label:"Assigned",color:"text-yellow-800 bg-yellow-100"},{value:"active",label:"Active",color:"text-green-800 bg-green-100"},{value:"completed",label:"Completed",color:"text-blue-800 bg-blue-100"},{value:"terminated",label:"Terminated",color:"text-red-800 bg-red-100"}],S=["Main Contractor","Subcontractor","Electrical Contractor","Plumbing Contractor","Painting Contractor","Flooring Contractor","HVAC Contractor","Structural Engineer","Architect","Interior Designer","Project Consultant","Safety Consultant","Material Supplier","Equipment Supplier","Specialist Contractor"];function k({projectVendor:e,isOpen:t,onClose:s,onSave:l,mode:n,isLoading:d=!1}){let{vendors:i}=(0,o.R)(),[c,m]=(0,r.useState)({vendorId:e?.vendorId||"",role:e?.role||"",contractValue:e?.contractValue||0,budgetAllocated:e?.budgetAllocated||0,budgetUsed:e?.budgetUsed||0,startDate:e?.startDate?e.startDate.toISOString().split("T")[0]:new Date().toISOString().split("T")[0],endDate:e?.endDate?e.endDate.toISOString().split("T")[0]:"",status:e?.status||"assigned"}),[x,u]=(0,r.useState)({}),p=i.filter(t=>"active"===t.status&&("edit"===n||t.id!==e?.vendorId)),h=i.find(e=>e.id===c.vendorId),y=(e,t)=>{m(s=>({...s,[e]:t})),x[e]&&u(t=>({...t,[e]:""}))},v=()=>{let e={};c.vendorId||(e.vendorId="Please select a vendor"),c.role.trim()||(e.role="Vendor role is required"),c.startDate||(e.startDate="Start date is required"),c.contractValue<0&&(e.contractValue="Contract value cannot be negative"),c.budgetAllocated<0&&(e.budgetAllocated="Budget allocated cannot be negative"),c.budgetUsed<0&&(e.budgetUsed="Budget used cannot be negative"),c.budgetUsed>c.budgetAllocated&&(e.budgetUsed="Budget used cannot exceed budget allocated");let t=new Date(c.startDate),s=c.endDate?new Date(c.endDate):null;return s&&s<=t&&(e.endDate="End date must be after start date"),"completed"!==c.status||c.endDate||(e.endDate="End date is required when status is completed"),u(e),0===Object.keys(e).length},f=async e=>{if(e.preventDefault(),!v())return;let t={vendorId:c.vendorId,role:c.role.trim(),contractValue:c.contractValue,budgetAllocated:c.budgetAllocated,budgetUsed:c.budgetUsed,startDate:new Date(c.startDate),endDate:c.endDate?new Date(c.endDate):void 0,status:c.status};await l(t)};return t?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:a.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:s})}),(0,a.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[a.jsx("div",{className:"bg-white px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:a.jsx(P,{className:"h-5 w-5 text-orange-600"})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"add"===n?"Assign Vendor to Project":"Edit Vendor Assignment"}),a.jsx("p",{className:"text-sm text-gray-600",children:"add"===n?"Assign a vendor to work on this project":"Update vendor assignment details"})]})]}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 p-2 rounded-lg hover:bg-gray-100",children:a.jsx(b.Z,{className:"h-5 w-5"})})]})}),(0,a.jsxs)("form",{onSubmit:f,className:"p-6",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Vendor Selection"}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Vendor *"}),(0,a.jsxs)("select",{value:c.vendorId,onChange:e=>y("vendorId",e.target.value),disabled:"edit"===n,className:(0,g.cn)("w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",x.vendorId?"border-red-300":"border-gray-300","edit"===n?"bg-gray-50 cursor-not-allowed":""),children:[a.jsx("option",{value:"",children:"Select a vendor..."}),p.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.vendorCode," - ",e.name," (",e.category,")"]},e.id))]}),x.vendorId&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.vendorId}),h&&a.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:h.name}),a.jsx("p",{className:"text-sm text-gray-600",children:h.contactPerson}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[h.email," • ",h.phone]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[a.jsx("span",{className:"text-yellow-400",children:"★"}),a.jsx("span",{className:"text-sm font-medium",children:h.rating.toFixed(1)})]}),a.jsx("p",{className:"text-xs text-gray-500",children:h.category})]})]})})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Contract Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role/Responsibility *"}),a.jsx("input",{type:"text",value:c.role,onChange:e=>y("role",e.target.value),list:"vendor-roles",className:(0,g.cn)("w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",x.role?"border-red-300":"border-gray-300"),placeholder:"Enter vendor role (e.g., Main Contractor, Subcontractor)"}),a.jsx("datalist",{id:"vendor-roles",children:S.map(e=>a.jsx("option",{value:e},e))}),x.role&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.role})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contract Value (SGD)"}),a.jsx("input",{type:"number",value:c.contractValue,onChange:e=>y("contractValue",parseFloat(e.target.value)||0),className:(0,g.cn)("w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",x.contractValue?"border-red-300":"border-gray-300"),placeholder:"0.00",min:"0",step:"0.01"}),x.contractValue&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.contractValue})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),a.jsx("select",{value:c.status,onChange:e=>y("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:A.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Budget Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Budget Allocated (SGD) *"}),a.jsx("input",{type:"number",value:c.budgetAllocated,onChange:e=>y("budgetAllocated",parseFloat(e.target.value)||0),className:(0,g.cn)("w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",x.budgetAllocated?"border-red-300":"border-gray-300"),placeholder:"0.00",min:"0",step:"0.01"}),x.budgetAllocated&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.budgetAllocated})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Budget Used (SGD)"}),a.jsx("input",{type:"number",value:c.budgetUsed,onChange:e=>y("budgetUsed",parseFloat(e.target.value)||0),className:(0,g.cn)("w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",x.budgetUsed?"border-red-300":"border-gray-300"),placeholder:"0.00",min:"0",step:"0.01",readOnly:"edit"===n}),x.budgetUsed&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.budgetUsed}),"edit"===n&&a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Budget used is automatically calculated based on purchase orders"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Timeline"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),a.jsx("input",{type:"date",value:c.startDate,onChange:e=>y("startDate",e.target.value),className:(0,g.cn)("w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",x.startDate?"border-red-300":"border-gray-300")}),x.startDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.startDate})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),a.jsx("input",{type:"date",value:c.endDate,onChange:e=>y("endDate",e.target.value),className:(0,g.cn)("w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",x.endDate?"border-red-300":"border-gray-300")}),x.endDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.endDate}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Leave empty if end date is not yet determined"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 mt-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:s,disabled:d,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:d,className:"btn-primary flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:d?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"add"===n?"Assigning...":"Saving..."})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(j.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"add"===n?"Assign Vendor":"Save Changes"})]})})]})]})]})]})}):null}var E=s(4061),Z=s(8307),V=s(9635);function M({projectId:e,existingTeam:t,isOpen:s,onClose:l,onAdd:n,isLoading:d=!1}){let{users:i}=(0,x.U)(),[c,o]=(0,r.useState)(""),m=i.filter(e=>e.isActive&&!t.includes(e.id)&&e.name.toLowerCase().includes(c.toLowerCase())),u=e=>{n(e),o("")};return s?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:a.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:l})}),(0,a.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[a.jsx("div",{className:"bg-white px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-ampere-100 rounded-lg flex items-center justify-center",children:a.jsx(E.Z,{className:"h-5 w-5 text-ampere-600"})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Add Team Member"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Select employees to add to this project"})]})]}),a.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 p-2 rounded-lg hover:bg-gray-100",children:a.jsx(b.Z,{className:"h-5 w-5"})})]})}),a.jsx("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Z.Z,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",value:c,onChange:e=>o(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ampere-500 focus:border-ampere-500",placeholder:"Search employees..."})]})}),a.jsx("div",{className:"max-h-96 overflow-y-auto",children:m.length>0?a.jsx("div",{className:"divide-y divide-gray-200",children:m.map(e=>(0,a.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-ampere-100 rounded-full flex items-center justify-center",children:a.jsx(V.Z,{className:"h-5 w-5 text-ampere-600"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:e.name}),a.jsx("p",{className:"text-sm text-gray-500 capitalize",children:e.role.replace("_"," ")})]})]}),a.jsx("button",{onClick:()=>u(e.id),disabled:d,className:"btn-primary text-sm px-3 py-1 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"})]},e.id))}):(0,a.jsxs)("div",{className:"px-6 py-12 text-center",children:[a.jsx(E.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No employees found"}),a.jsx("p",{className:"text-gray-600",children:c?"No employees match your search criteria":"All available employees are already assigned to this project"})]})}),a.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:a.jsx("div",{className:"flex items-center justify-end",children:a.jsx("button",{type:"button",onClick:l,disabled:d,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Close"})})})]})]})}):null}var _=s(3855),T=s(7358),I=s(1821),U=s(2714),O=s(9508),R=s(6283);let B={draft:"bg-gray-100 text-gray-800",pending_approval:"bg-yellow-100 text-yellow-800",approved:"bg-blue-100 text-blue-800",sent:"bg-indigo-100 text-indigo-800",partially_received:"bg-purple-100 text-purple-800",received:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",closed:"bg-gray-100 text-gray-800"},F={draft:"Draft",pending_approval:"Pending Approval",approved:"Approved",sent:"Sent",partially_received:"Partially Received",received:"Received",cancelled:"Cancelled",closed:"Closed"};function q({projectId:e,onAddPurchaseOrder:t,onViewPurchaseOrder:s,onEditPurchaseOrder:l}){let{getPurchaseOrdersByProject:n}=(0,m._)(),{getVendor:d}=(0,o.R)(),[i,c]=(0,r.useState)("all"),x=n(e),u=x.filter(e=>"all"===i||e.status===i),p=e=>new Intl.NumberFormat("en-SG",{style:"currency",currency:"SGD"}).format(e);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Purchase Orders"}),(0,a.jsxs)("button",{onClick:t,className:"btn-primary flex items-center space-x-2",children:[a.jsx(_.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Create Purchase Order"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)("button",{onClick:()=>c("all"),className:(0,g.cn)("px-3 py-1 text-sm rounded-full","all"===i?"bg-ampere-100 text-ampere-800 border border-ampere-200":"bg-gray-100 text-gray-800 border border-gray-200"),children:["All (",x.length,")"]}),Object.entries(F).map(([e,t])=>{let s=x.filter(t=>t.status===e).length;return 0===s?null:(0,a.jsxs)("button",{onClick:()=>c(e),className:(0,g.cn)("px-3 py-1 text-sm rounded-full",i===e?"bg-ampere-100 text-ampere-800 border border-ampere-200":"bg-gray-100 text-gray-800 border border-gray-200"),children:[t," (",s,")"]},e)})]}),u.length>0?a.jsx("div",{className:"space-y-4",children:u.map(e=>{let t=d(e.vendorId);return a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:e.title}),a.jsx("span",{className:(0,g.cn)("px-2 py-1 text-xs font-medium rounded-full",B[e.status]),children:F[e.status]}),a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:e.poNumber})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[t&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[a.jsx(P,{className:"h-4 w-4"}),a.jsx("span",{children:t.name})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[a.jsx(T.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Required: ",new Date(e.requiredDate).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[a.jsx(I.Z,{className:"h-4 w-4"}),a.jsx("span",{children:p(e.totalAmount)})]})]}),a.jsx("div",{className:"mt-2",children:a.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.description})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>s(e.id),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",title:"View",children:a.jsx(U.Z,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>l(e.id),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",title:"Edit",children:a.jsx(O.Z,{className:"h-4 w-4"})})]})]})},e.id)})}):(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(R.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Purchase Orders"}),a.jsx("p",{className:"text-gray-600 mb-4",children:0===x.length?"Get started by creating a purchase order for this project.":"No purchase orders match the current filter."}),a.jsx("button",{onClick:t,className:"btn-primary",children:"Create Purchase Order"})]})]})}var L=s(4731),G=s(949),z=s(6333),H=s(6697),$=s(8998),W=s(8787),X=s(8091);let Y={planning:"bg-gray-100 text-gray-800",permit_application:"bg-yellow-100 text-yellow-800",approved:"bg-emerald-100 text-emerald-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",on_hold:"bg-orange-100 text-orange-800"},J={planning:"Planning",permit_application:"Permit Application",approved:"Approved",in_progress:"In Progress",completed:"Completed",cancelled:"Cancelled",on_hold:"On Hold"},K={renovation:"Renovation",addition_alteration:"A&A",reinstatement:"Reinstatement",new_construction:"New Construction",maintenance:"Maintenance"};function Q(){let e=(0,l.useParams)();(0,l.useRouter)();let{user:t}=(0,d.a)(),{clients:s}=(0,i.a)(),{getProject:j,updateProject:y,addPermit:v,updatePermit:f,deletePermit:D,addMilestone:P,updateMilestone:A,deleteMilestone:S,addProjectVendor:Z,updateProjectVendor:V,deleteProjectVendor:U,updateVendorBudgetUsage:R}=(0,c.Z)(),{getVendor:B}=(0,o.R)(),{addPurchaseOrder:F,updatePurchaseOrder:Q}=(0,m._)(),{users:ee}=(0,x.U)(),et=e.id,es=j(et),[ea,er]=(0,r.useState)("overview"),[el,en]=(0,r.useState)(!1),[ed,ei]=(0,r.useState)(!1),[ec,eo]=(0,r.useState)(""),[em,ex]=(0,r.useState)(),[eu,ep]=(0,r.useState)(!1),[eg,eh]=(0,r.useState)(!1),[eb,ej]=(0,r.useState)(!1),[ey,ev]=(0,r.useState)(!1),[ef,eN]=(0,r.useState)(),[ew,eD]=(0,r.useState)(),[eC,eP]=(0,r.useState)(),[eA,eS]=(0,r.useState)(!1),[ek,eE]=(0,r.useState)();if(!es)return a.jsx(u.Z,{user:t||{id:"",name:"Guest",role:"sales",email:"",isActive:!0,createdAt:new Date,assignedProjects:[],permissions:{projects:{canViewAllProjects:!1,canEditAssignedProjects:!1,canCreateProjects:!1,canDeleteProjects:!1,canManageTeam:!1},finance:{canViewFinance:!1,canEditInvoices:!1,canDeleteInvoices:!1,canViewReports:!1,canManagePayments:!1},clients:{canViewClients:!0,canEditClients:!0,canCreateClients:!0,canDeleteClients:!1},system:{canManageUsers:!1,canViewAuditLogs:!1,canManageSettings:!1,canViewReports:!1}}},children:a.jsx("div",{className:"flex items-center justify-center h-96",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(G.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Project Not Found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"The project you're looking for doesn't exist."}),a.jsx(n.default,{href:"/projects",className:"btn-primary",children:"Back to Projects"})]})})});let eZ=s.find(e=>e.id===es.clientId),eV=((e,t,s)=>{let a=new Date(e).getTime(),r=new Date(t).getTime();return Math.min(Math.max(((s?new Date(s).getTime():new Date().getTime())-a)/(r-a)*100,0),100)})(es.startDate,es.expectedEndDate,es.actualEndDate),eM=((e,t)=>{if(t)return 0;let s=new Date;return Math.ceil((new Date(e).getTime()-s.getTime())/864e5)})(es.expectedEndDate,es.actualEndDate),e_=e=>new Intl.NumberFormat("en-SG",{style:"currency",currency:"SGD"}).format(e),eT=async e=>{ei(!0),eo("");try{await new Promise(e=>setTimeout(e,1e3)),y(es.id,e),eo("Project updated successfully!"),en(!1),setTimeout(()=>{eo("")},3e3)}catch(e){console.error("Error updating project:",e)}finally{ei(!1)}},eI=async e=>{ei(!0);try{await new Promise(e=>setTimeout(e,500)),ef?(f(es.id,ef.id,e),eo("Permit updated successfully!")):(v(es.id,e),eo("Permit added successfully!")),ep(!1),eN(void 0),setTimeout(()=>{eo("")},3e3)}catch(e){console.error("Error saving permit:",e)}finally{ei(!1)}},eU=async e=>{ei(!0);try{await new Promise(e=>setTimeout(e,500)),ew?(A(es.id,ew.id,e),eo("Milestone updated successfully!")):(P(es.id,e),eo("Milestone added successfully!")),eh(!1),eD(void 0),setTimeout(()=>{eo("")},3e3)}catch(e){console.error("Error saving milestone:",e)}finally{ei(!1)}},eO=e=>{eP(e),ej(!0)},eR=e=>{U(et,e),eo("Vendor removed from project successfully!"),setTimeout(()=>eo(""),3e3)},eB=async e=>{ei(!0);try{await new Promise(e=>setTimeout(e,1e3)),eC?(V(et,eC.vendorId,e),eo("Vendor updated successfully!")):(Z(et,e),eo("Vendor added to project successfully!")),ej(!1),eP(void 0),setTimeout(()=>eo(""),3e3)}catch(e){console.error("Error saving vendor:",e)}finally{ei(!1)}},eF=async e=>{ei(!0);try{await new Promise(e=>setTimeout(e,500)),ek?(Q(ek.id,e),eo("Purchase order updated successfully!")):(F(e),eo("Purchase order created successfully!")),eS(!1),eE(void 0),setTimeout(()=>{eo("")},3e3)}catch(e){console.error("Error saving purchase order:",e)}finally{ei(!1)}},eq=e=>{let t=es.team.filter(t=>t!==e);y(es.id,{team:t}),eo("Employee removed from project successfully!"),setTimeout(()=>eo(""),3e3)};return t&&(t.assignedProjects?.includes(et)||t.permissions.projects.canViewAllProjects||"super_admin"===t.role||"admin"===t.role)?(0,a.jsxs)(u.Z,{user:t||{id:"",name:"Guest",role:"sales",email:"",isActive:!0,createdAt:new Date,assignedProjects:[],permissions:{projects:{canViewAllProjects:!1,canEditAssignedProjects:!1,canCreateProjects:!1,canDeleteProjects:!1,canManageTeam:!1},finance:{canViewFinance:!1,canEditInvoices:!1,canDeleteInvoices:!1,canViewReports:!1,canManagePayments:!1},clients:{canViewClients:!0,canEditClients:!0,canCreateClients:!0,canDeleteClients:!1},system:{canManageUsers:!1,canViewAuditLogs:!1,canManageSettings:!1,canViewReports:!1}}},children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx(n.default,{href:"/projects",className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:a.jsx(z.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:es.name}),(0,a.jsxs)("p",{className:"text-gray-600",children:[eZ?.name," • ",K[es.type]]})]})]}),(t?.role==="super_admin"||t?.role==="admin"||t?.role==="projects")&&(0,a.jsxs)("button",{onClick:()=>{ex(es),en(!0)},className:"btn-secondary flex items-center space-x-2",children:[a.jsx(O.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Edit Project"})]})]}),ec&&(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(h.Z,{className:"h-5 w-5 text-green-600"}),a.jsx("span",{className:"text-green-800 font-medium",children:ec})]}),a.jsx("button",{onClick:()=>eo(""),className:"text-green-600 hover:text-green-800 p-1 rounded-lg hover:bg-green-100",children:a.jsx(b.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Contract Value"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e_(es.contractValue)})]}),a.jsx(I.Z,{className:"h-8 w-8 text-ampere-600"})]})}),a.jsx("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Status"}),a.jsx("span",{className:(0,g.cn)("px-2 py-1 text-xs font-medium rounded-full",Y[es.status]),children:J[es.status]})]}),a.jsx(h.Z,{className:"h-8 w-8 text-ampere-600"})]})}),a.jsx("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Start Date"}),a.jsx("p",{className:"text-lg font-bold text-gray-900",children:new Date(es.startDate).toLocaleDateString()})]}),a.jsx(T.Z,{className:"h-8 w-8 text-ampere-600"})]})}),a.jsx("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Progress"}),(0,a.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:[Math.round(eV),"%"]})]}),a.jsx(H.Z,{className:"h-8 w-8 text-ampere-600"})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[a.jsx("div",{className:"border-b border-gray-200",children:(0,a.jsxs)("nav",{className:"flex space-x-8 px-6",children:[a.jsx("button",{onClick:()=>er("overview"),className:(0,g.cn)("py-4 px-1 border-b-2 font-medium text-sm","overview"===ea?"border-ampere-500 text-ampere-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Overview"}),a.jsx("button",{onClick:()=>er("team"),className:(0,g.cn)("py-4 px-1 border-b-2 font-medium text-sm","team"===ea?"border-ampere-500 text-ampere-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Team"}),a.jsx("button",{onClick:()=>er("permits"),className:(0,g.cn)("py-4 px-1 border-b-2 font-medium text-sm","permits"===ea?"border-ampere-500 text-ampere-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Permits"}),a.jsx("button",{onClick:()=>er("milestones"),className:(0,g.cn)("py-4 px-1 border-b-2 font-medium text-sm","milestones"===ea?"border-ampere-500 text-ampere-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Milestones"}),a.jsx("button",{onClick:()=>er("vendors"),className:(0,g.cn)("py-4 px-1 border-b-2 font-medium text-sm","vendors"===ea?"border-ampere-500 text-ampere-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Vendors"}),a.jsx("button",{onClick:()=>er("purchase-orders"),className:(0,g.cn)("py-4 px-1 border-b-2 font-medium text-sm","purchase-orders"===ea?"border-ampere-500 text-ampere-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Purchase Orders"})]})}),(0,a.jsxs)("div",{className:"p-6",children:["overview"===ea&&a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Project Details"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Description"}),a.jsx("p",{className:"text-gray-900",children:es.description||"No description provided"})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Location"}),(0,a.jsxs)("p",{className:"text-gray-900",children:[es.location.street," ",es.location.building," ",es.location.unit,a.jsx("br",{}),"Singapore ",es.location.postalCode]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Expected Completion"}),a.jsx("p",{className:"text-gray-900",children:new Date(es.expectedEndDate).toLocaleDateString()})]}),es.actualEndDate&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Actual Completion"}),a.jsx("p",{className:"text-gray-900",children:new Date(es.actualEndDate).toLocaleDateString()})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Project Manager"}),a.jsx("p",{className:"text-gray-900",children:t?.name||"Not assigned"})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Progress Tracking"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm font-medium text-gray-600 mb-1",children:[a.jsx("span",{children:"Overall Progress"}),(0,a.jsxs)("span",{children:[Math.round(eV),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-ampere-600 h-2 rounded-full",style:{width:`${eV}%`}})})]}),eM<=0&&"completed"!==es.status&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(G.Z,{className:"h-5 w-5 text-red-500"}),a.jsx("span",{className:"text-sm font-medium text-red-800",children:"Project Overdue"})]}),(0,a.jsxs)("p",{className:"text-sm text-red-700 mt-1",children:["Project is ",Math.abs(eM)," days past deadline"]})]}),eM>0&&eM<=7&&"completed"!==es.status&&(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx($.Z,{className:"h-5 w-5 text-yellow-500"}),a.jsx("span",{className:"text-sm font-medium text-yellow-800",children:"Deadline Approaching"})]}),(0,a.jsxs)("p",{className:"text-sm text-yellow-700 mt-1",children:[eM," days remaining until deadline"]})]})]})]})]})}),"team"===ea&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Team"}),t&&("super_admin"===t.role||"admin"===t.role||"projects"===t.role)&&(0,a.jsxs)("button",{onClick:()=>ev(!0),className:"btn-primary flex items-center space-x-2",children:[a.jsx(_.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Add Team Member"})]})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("h4",{className:"font-medium text-gray-900",children:"Assigned Employees"})}),a.jsx("div",{className:"divide-y divide-gray-200",children:es.team.length>0?es.team.map(e=>{let s=ee.find(t=>t.id===e);return(0,a.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-ampere-100 rounded-full flex items-center justify-center",children:a.jsx(E.Z,{className:"h-5 w-5 text-ampere-600"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:s?.name||`User ${e}`}),a.jsx("p",{className:"text-sm text-gray-500",children:s?.role?s.role.replace("_"," ").toUpperCase():"Team Member"})]})]}),t&&("super_admin"===t.role||"admin"===t.role||"projects"===t.role)&&a.jsx("button",{onClick:()=>eq(e),className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50",children:a.jsx(b.Z,{className:"h-4 w-4"})})]},e)}):(0,a.jsxs)("div",{className:"px-6 py-12 text-center",children:[a.jsx(E.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No team members assigned"}),a.jsx("p",{className:"text-gray-600",children:"Add team members to this project to grant them access."})]})})]})]}),"permits"===ea&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Construction Permits"}),("super_admin"===t.role||"admin"===t.role||"projects"===t.role)&&(0,a.jsxs)("button",{onClick:()=>{eN(void 0),ep(!0)},className:"btn-primary flex items-center space-x-2",children:[a.jsx(_.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Add Permit"})]})]}),es.permits&&es.permits.length>0?a.jsx("div",{className:"space-y-4",children:es.permits.map((e,t)=>a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:e.type}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.notes||"No additional notes"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:["Submitted: ",new Date(e.submittedDate).toLocaleDateString()]}),e.approvedDate&&(0,a.jsxs)("span",{children:["Approved: ",new Date(e.approvedDate).toLocaleDateString()]}),e.expiryDate&&(0,a.jsxs)("span",{children:["Expires: ",new Date(e.expiryDate).toLocaleDateString()]})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("span",{className:(0,g.cn)("px-2 py-1 text-xs font-medium rounded-full","approved"===e.status?"bg-green-100 text-green-800":"under_review"===e.status?"bg-yellow-100 text-yellow-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})})]})},t))}):(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(h.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Permits Added"}),a.jsx("p",{className:"text-gray-600",children:"Start by adding construction permits for this project."})]})]}),"milestones"===ea&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Milestones"}),("super_admin"===t.role||"admin"===t.role||"projects"===t.role)&&(0,a.jsxs)("button",{onClick:()=>{eD(void 0),eh(!0)},className:"btn-primary flex items-center space-x-2",children:[a.jsx(_.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Add Milestone"})]})]}),es.milestones&&es.milestones.length>0?a.jsx("div",{className:"space-y-4",children:es.milestones.map((e,t)=>a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:["Due: ",new Date(e.targetDate).toLocaleDateString()]}),e.actualDate&&(0,a.jsxs)("span",{children:["Completed: ",new Date(e.actualDate).toLocaleDateString()]})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("span",{className:(0,g.cn)("px-2 py-1 text-xs font-medium rounded-full","completed"===e.status?"bg-green-100 text-green-800":"in_progress"===e.status?"bg-blue-100 text-blue-800":"delayed"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})})]})},t))}):(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(w.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Milestones Added"}),a.jsx("p",{className:"text-gray-600",children:"Start by adding project milestones and deliverables."})]})]}),"vendors"===ea&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Vendors"}),t&&("super_admin"===t.role||"admin"===t.role||"projects"===t.role)&&(0,a.jsxs)("button",{onClick:()=>{eP(void 0),ej(!0)},className:"btn-primary flex items-center space-x-2",children:[a.jsx(_.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Add Vendor"})]})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("h4",{className:"font-medium text-gray-900",children:"Assigned Vendors with Budgets"})}),a.jsx("div",{className:"divide-y divide-gray-200",children:es.vendors.length>0?es.vendors.map(e=>{let s=B(e.vendorId),r=e.budgetUsed||0,l=e.budgetAllocated||0,n=l-r,d=l>0?r/l*100:0;return(0,a.jsxs)("div",{className:"px-6 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-ampere-100 rounded-lg flex items-center justify-center",children:a.jsx(W.Z,{className:"h-6 w-6 text-ampere-600"})}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:s?.name||"Unknown Vendor"}),a.jsx("p",{className:"text-sm text-gray-500",children:e.role})]})]}),t&&("super_admin"===t.role||"admin"===t.role||"projects"===t.role)&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>eO(e),className:"p-2 text-gray-400 hover:text-blue-600 rounded-lg hover:bg-blue-50",children:a.jsx(O.Z,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>eR(e.vendorId),className:"p-2 text-gray-400 hover:text-red-600 rounded-lg hover:bg-red-50",children:a.jsx(X.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Budget Allocated"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e_(l)})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Budget Used"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e_(r)})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Budget Remaining"}),a.jsx("p",{className:`text-lg font-semibold ${n<0?"text-red-600":"text-gray-900"}`,children:e_(n)})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Utilization"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:[Math.round(d),"%"]})]})]}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm font-medium text-gray-600 mb-1",children:[a.jsx("span",{children:"Budget Utilization"}),(0,a.jsxs)("span",{children:[Math.round(d),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${d>90?"bg-red-500":d>75?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(d,100)}%`}})})]})]},e.vendorId)}):(0,a.jsxs)("div",{className:"px-6 py-12 text-center",children:[a.jsx(W.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No vendors assigned"}),a.jsx("p",{className:"text-gray-600",children:"Add vendors to this project and allocate budgets."})]})})]})]}),"purchase-orders"===ea&&a.jsx(q,{projectId:es.id,onAddPurchaseOrder:()=>{eE(void 0),eS(!0)},onViewPurchaseOrder:e=>{alert(`Viewing purchase order ${e}`)},onEditPurchaseOrder:e=>{eE(e),eS(!0)}})]})]})]}),a.jsx(p.Z,{project:em,isOpen:el,onClose:()=>{en(!1),ex(void 0)},onSave:eT,mode:em?"edit":"add",isLoading:ed}),a.jsx(N,{permit:ef,isOpen:eu,onClose:()=>{ep(!1),eN(void 0)},onSave:eI,mode:ef?"edit":"add",isLoading:ed}),a.jsx(C,{milestone:ew,isOpen:eg,onClose:()=>{eh(!1),eD(void 0)},onSave:eU,mode:ew?"edit":"add",isLoading:ed}),a.jsx(k,{projectVendor:eC,isOpen:eb,onClose:()=>{ej(!1),eP(void 0)},onSave:eB,mode:eC?"edit":"add",isLoading:ed}),a.jsx(L.Z,{purchaseOrder:ek,projectId:es.id,isOpen:eA,onClose:()=>{eS(!1),eE(void 0)},onSave:eF,mode:ek?"edit":"add",isLoading:ed}),a.jsx(M,{projectId:es.id,existingTeam:es.team,isOpen:ey,onClose:()=>ev(!1),onAdd:e=>{if(!es.team.includes(e)){let t=[...es.team,e];y(es.id,{team:t}),eo("Employee added to project successfully!"),setTimeout(()=>eo(""),3e3)}ev(!1)},isLoading:ed})]}):a.jsx(u.Z,{user:t||{id:"",name:"Guest",role:"sales",email:"",isActive:!0,createdAt:new Date,assignedProjects:[],permissions:{projects:{canViewAllProjects:!1,canEditAssignedProjects:!1,canCreateProjects:!1,canDeleteProjects:!1,canManageTeam:!1},finance:{canViewFinance:!1,canEditInvoices:!1,canDeleteInvoices:!1,canViewReports:!1,canManagePayments:!1},clients:{canViewClients:!0,canEditClients:!0,canCreateClients:!0,canDeleteClients:!1},system:{canManageUsers:!1,canViewAuditLogs:!1,canManageSettings:!1,canViewReports:!1}}},children:a.jsx("div",{className:"flex items-center justify-center h-96",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(b.Z,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have permission to view this project."}),a.jsx(n.default,{href:"/projects",className:"btn-primary",children:"Back to Projects"})]})})})}},8231:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`C:\Users\stamm\AMPERE WEBAPP\src\app\projects\[id]\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[935,910,370,884,607,357],()=>s(5430));module.exports=a})();